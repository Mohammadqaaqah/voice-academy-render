<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ™ï¸ Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù… Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠØ©</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 20px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .header h1 {
            color: #4a5568;
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            color: #718096;
            font-size: 1.1em;
        }

        .login-section {
            background: rgba(255, 255, 255, 0.95);
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            text-align: center;
            max-width: 500px;
            margin: 0 auto;
        }

        .input-group {
            margin-bottom: 20px;
            text-align: right;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #4a5568;
        }

        .input-group input,
        .input-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        .input-group input:focus,
        .input-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px;
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .main-content {
            display: none;
        }

        .tabs {
            display: flex;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 10px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            border-radius: 10px;
            transition: background 0.3s;
            font-weight: bold;
        }

        .tab.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .content {
            display: none;
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .content.active {
            display: block;
        }

        .user-info {
            background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
            text-align: center;
        }

        .skill-bar {
            margin-bottom: 20px;
        }

        .skill-name {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-weight: bold;
        }

        .progress-bar {
            background: #e2e8f0;
            height: 20px;
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #48bb78 0%, #38a169 100%);
            border-radius: 10px;
            transition: width 0.3s;
        }

        .breathing-circle {
            width: 200px;
            height: 200px;
            border: 5px solid #667eea;
            border-radius: 50%;
            margin: 30px auto;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: bold;
            transition: transform 4s ease-in-out;
            cursor: pointer;
        }

        .breathing-circle.inhale {
            transform: scale(1.3);
            background: rgba(102, 126, 234, 0.1);
        }

        .breathing-circle.exhale {
            transform: scale(0.8);
            background: rgba(118, 75, 162, 0.1);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .stat-card {
            background: linear-gradient(135deg, #4299e1 0%, #3182ce 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
        }

        .stat-number {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 10px;
            color: white;
            font-weight: bold;
            z-index: 1000;
            transform: translateX(400px);
            transition: transform 0.3s;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success {
            background: #48bb78;
        }

        .notification.error {
            background: #f56565;
        }

        .notification.warning {
            background: #ed8936;
        }

        .notification.info {
            background: #4299e1;
        }

        .scenario-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .scenario-card {
            background: linear-gradient(135deg, #ed64a6 0%, #d53f8c 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            cursor: pointer;
            transition: transform 0.3s;
            text-align: center;
        }

        .scenario-card:hover {
            transform: translateY(-5px);
        }

        .scenario-card.selected {
            border: 3px solid #ffd700;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
        }

        .game-area {
            background: rgba(102, 126, 234, 0.1);
            padding: 30px;
            border-radius: 15px;
            margin: 20px 0;
            text-align: center;
        }

        .timer-display {
            font-size: 2em;
            font-weight: bold;
            color: #667eea;
            margin: 20px 0;
        }

        .hidden {
            display: none !important;
        }

        @media (max-width: 768px) {
            .tabs {
                flex-direction: column;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .breathing-circle {
                width: 150px;
                height: 150px;
                font-size: 18px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Ø±Ø£Ø³ Ø§Ù„ØµÙØ­Ø© -->
        <div class="header">
            <h1>ğŸ™ï¸ Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù… Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠØ©</h1>
            <p>Ù…Ù†ØµØ© Ø§Ù„ØªØ¯Ø±ÙŠØ¨ Ø§Ù„ØµÙˆØªÙŠ ÙˆØ§Ù„Ø¥Ù„Ù‚Ø§Ø¡ Ø§Ù„Ù…Ø­ØªØ±Ù Ø¨ØªÙ‚Ù†ÙŠØ§Øª Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ</p>
        </div>

        <!-- Ù‚Ø³Ù… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
        <div id="loginSection" class="login-section">
            <h2>ğŸš€ Ø§Ø¨Ø¯Ø£ Ø±Ø­Ù„ØªÙƒ Ø§Ù„ØªØ¯Ø±ÙŠØ¨ÙŠØ©</h2>
            <div class="input-group">
                <label>Ø§Ø³Ù… Ø§Ù„Ù…ØªØ¯Ø±Ø¨:</label>
                <input type="text" id="userName" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ø§Ù„ÙƒØ§Ù…Ù„">
            </div>
            <div class="input-group">
                <label>Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø®Ø¨Ø±Ø©:</label>
                <select id="userLevel">
                    <option value="beginner">Ù…Ø¨ØªØ¯Ø¦ - Ø£ÙˆÙ„ Ù…Ø±Ø© ÙÙŠ Ø§Ù„ØªØ¯Ø±ÙŠØ¨ Ø§Ù„ØµÙˆØªÙŠ</option>
                    <option value="intermediate">Ù…ØªÙˆØ³Ø· - Ù„Ø¯ÙŠ Ø®Ø¨Ø±Ø© Ø£Ø³Ø§Ø³ÙŠØ©</option>
                    <option value="advanced">Ù…ØªÙ‚Ø¯Ù… - Ø®Ø¨Ø±Ø© Ø¬ÙŠØ¯Ø© Ø£Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„ØªØ·ÙˆÙŠØ±</option>
                </select>
            </div>
            <button class="btn" onclick="startTraining()">ğŸ¯ Ø¨Ø¯Ø¡ Ø§Ù„ØªØ¯Ø±ÙŠØ¨</button>
            <button class="btn" onclick="loadExistingUser()">ğŸ“‚ ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ù…ÙˆØ¬ÙˆØ¯Ø©</button>
            <button class="btn" onclick="showDemo()">ğŸ‘ï¸ Ø¹Ø±Ø¶ ØªÙˆØ¶ÙŠØ­ÙŠ</button>
        </div>

        <!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ -->
        <div id="mainContent" class="main-content">
            <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… -->
            <div class="user-info">
                <h2 id="levelDisplay">Ø§Ù„Ù…ØªØ¯Ø±Ø¨ - Ø§Ù„Ù…Ø¨ØªØ¯Ø¦ (Ø§Ù„Ù…Ø³ØªÙˆÙ‰ 1)</h2>
                <p>Ù†Ù‚Ø§Ø· Ø§Ù„Ø®Ø¨Ø±Ø©: <span id="xpDisplay">0</span> | Ø§Ù„Ù…Ø³ØªÙˆÙ‰: <span id="levelNumber">1</span></p>
            </div>

            <!-- Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª -->
            <div class="tabs">
                <div class="tab active" data-target="dashboard" onclick="switchTab('dashboard', this)">ğŸ  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</div>
                <div class="tab" data-target="breathing" onclick="switchTab('breathing', this)">ğŸ§˜ ØªÙ…Ø§Ø±ÙŠÙ† Ø§Ù„ØªÙ†ÙØ³</div>
                <div class="tab" data-target="studio" onclick="switchTab('studio', this)">ğŸ¬ Ø§Ù„Ø§Ø³ØªÙˆØ¯ÙŠÙˆ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ</div>
                <div class="tab" data-target="games" onclick="switchTab('games', this)">ğŸ® Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ©</div>
                <div class="tab" data-target="progress" onclick="switchTab('progress', this)">ğŸ“Š ØªÙ‚Ø±ÙŠØ± Ø§Ù„ØªÙ‚Ø¯Ù…</div>
            </div>

            <!-- Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
            <div id="dashboard" class="content active">
                <h3>ğŸ“Š Ù…Ù‡Ø§Ø±Ø§ØªÙƒ Ø§Ù„ØµÙˆØªÙŠØ©</h3>
                <div class="skill-bar">
                    <div class="skill-name">
                        <span>Ø§Ù„ØªÙ†ÙØ³ ÙˆØ§Ù„ØªØ­ÙƒÙ…</span>
                        <span id="breathingPercent">0%</span>
                    </div>
                    <div class="progress-bar">
                        <div id="breathingBar" class="progress-fill" style="width: 0%"></div>
                    </div>
                </div>
                <div class="skill-bar">
                    <div class="skill-name">
                        <span>ÙˆØ¶ÙˆØ­ Ø§Ù„Ù†Ø·Ù‚</span>
                        <span id="clarityPercent">0%</span>
                    </div>
                    <div class="progress-bar">
                        <div id="clarityBar" class="progress-fill" style="width: 0%"></div>
                    </div>
                </div>
                <div class="skill-bar">
                    <div class="skill-name">
                        <span>Ø§Ù„ØªØ¹Ø¨ÙŠØ± ÙˆØ§Ù„ØªÙ†ØºÙŠÙ…</span>
                        <span id="expressionPercent">0%</span>
                    </div>
                    <div class="progress-bar">
                        <div id="expressionBar" class="progress-fill" style="width: 0%"></div>
                    </div>
                </div>
                <div class="skill-bar">
                    <div class="skill-name">
                        <span>Ø§Ù„Ø«Ù‚Ø© ÙˆØ§Ù„Ø­Ø¶ÙˆØ±</span>
                        <span id="confidencePercent">0%</span>
                    </div>
                    <div class="progress-bar">
                        <div id="confidenceBar" class="progress-fill" style="width: 0%"></div>
                    </div>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number" id="exercisesCompleted">0</div>
                        <div>ØªÙ…Ø§Ø±ÙŠÙ† Ù…ÙƒØªÙ…Ù„Ø©</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="trainingMinutes">0</div>
                        <div>Ø¯Ù‚Ø§Ø¦Ù‚ Ø§Ù„ØªØ¯Ø±ÙŠØ¨</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="currentStreak">0</div>
                        <div>Ø£ÙŠØ§Ù… Ù…ØªØªØ§Ù„ÙŠØ©</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="gamesPlayedCount">0</div>
                        <div>Ø£Ù„Ø¹Ø§Ø¨ Ù…ÙƒØªÙ…Ù„Ø©</div>
                    </div>
                </div>

                <div id="aiAdvice" style="margin-top: 30px; padding: 20px; background: rgba(102, 126, 234, 0.1); border-radius: 15px;">
                    <h4>ğŸ’¡ Ø§Ù„Ù…Ø¯Ø±Ø¨ Ø§Ù„Ø°ÙƒÙŠ</h4>
                    <p>Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù… Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠØ©! Ø§Ø¨Ø¯Ø£ Ø¨ØªÙ…Ø§Ø±ÙŠÙ† Ø§Ù„ØªÙ†ÙØ³ Ù„Ø¨Ù†Ø§Ø¡ Ø£Ø³Ø§Ø³ Ù‚ÙˆÙŠ.</p>
                </div>

                <div style="text-align: center; margin-top: 20px;">
                    <button class="btn" onclick="getSmartAdvice()">ğŸ’¡ Ù†ØµÙŠØ­Ø© Ø°ÙƒÙŠØ©</button>
                    <button class="btn" onclick="getDailyChallenge()">ğŸ¯ ØªØ­Ø¯ÙŠ Ø§Ù„ÙŠÙˆÙ…</button>
                    <button class="btn" onclick="startQuickAssessment()">âš¡ ØªÙ‚ÙŠÙŠÙ… Ø³Ø±ÙŠØ¹</button>
                </div>

                <div id="assessmentResults" class="hidden" style="margin-top: 20px; padding: 20px; background: rgba(72, 187, 120, 0.1); border-radius: 15px;">
                    <h4>ğŸ“Š Ù†ØªØ§Ø¦Ø¬ Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø³Ø±ÙŠØ¹</h4>
                    <p>Ø§Ù„Ø¯Ø±Ø¬Ø© Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ©: <span id="overallScore">0</span>/100</p>
                    <p>ÙˆØ¶ÙˆØ­ Ø§Ù„Ù†Ø·Ù‚: <span id="clarityScore">0</span>/100</p>
                    <p>Ø§Ù„Ø«Ù‚Ø©: <span id="confidenceScore">0</span>/100</p>
                    <p>Ø§Ù„ØªØ¹Ø¨ÙŠØ±: <span id="expressionScore">0</span>/100</p>
                </div>
            </div>

            <!-- ØªÙ…Ø§Ø±ÙŠÙ† Ø§Ù„ØªÙ†ÙØ³ -->
            <div id="breathing" class="content">
                <h3>ğŸ§˜ ØªÙ…Ø§Ø±ÙŠÙ† Ø§Ù„ØªÙ†ÙØ³</h3>
                <p>ØªÙ…Ø§Ø±ÙŠÙ† Ø§Ù„ØªÙ†ÙØ³ Ù‡ÙŠ Ø§Ù„Ø£Ø³Ø§Ø³ Ù„Ø£ÙŠ Ø£Ø¯Ø§Ø¡ ØµÙˆØªÙŠ Ù…ØªÙ…ÙŠØ². ØªØ¹Ù„Ù… ØªÙ‚Ù†ÙŠØ§Øª Ø§Ù„ØªÙ†ÙØ³ Ø§Ù„ØµØ­ÙŠØ­ Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ØµÙˆØª Ù‚ÙˆÙŠ ÙˆØ«Ø§Ø¨Øª.</p>
                
                <div id="breathingCircle" class="breathing-circle" onclick="startBreathingExercise()">
                    <span id="breathingText">Ø§Ø¶ØºØ· Ù„Ø¨Ø¯Ø¡ Ø§Ù„ØªÙ…Ø±ÙŠÙ†</span>
                </div>
                
                <div class="timer-display" id="breathingTimer">00:00</div>
                <p style="text-align: center;">Ù…Ø¯Ø© Ø§Ù„ØªÙ…Ø±ÙŠÙ†</p>

                <div style="text-align: center; margin: 30px 0;">
                    <button class="btn" onclick="startBasicBreathing()">ğŸŒ¸ ØªÙ†ÙØ³ Ø£Ø³Ø§Ø³ÙŠ (4-4-4)</button>
                    <button class="btn" onclick="startAdvancedBreathing()">ğŸ’ª ØªÙ†ÙØ³ Ù…ØªÙ‚Ø¯Ù… (4-7-8)</button>
                    <button class="btn" onclick="startGuidedBreathing()">ğŸ¯ ØªÙ†ÙØ³ Ù…ÙˆØ¬Ù‡</button>
                    <button class="btn" id="stopBreathingBtn" onclick="stopAllBreathing()" disabled>â¹ï¸ Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ØªÙ…Ø±ÙŠÙ†</button>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number" id="breathingCycles">0</div>
                        <div>Ø¯ÙˆØ±Ø§Øª Ù…ÙƒØªÙ…Ù„Ø©</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="breathingSessionTime">0</div>
                        <div>Ø¯Ù‚Ø§Ø¦Ù‚ Ø§Ù„Ø¬Ù„Ø³Ø©</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="breathingStreakDays">0</div>
                        <div>Ø£ÙŠØ§Ù… Ù…ØªØªØ§Ù„ÙŠØ©</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="breathingLevel">Ù…Ø¨ØªØ¯Ø¦</div>
                        <div>Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØªÙ†ÙØ³</div>
                    </div>
                </div>
            </div>

            <!-- Ø§Ù„Ø§Ø³ØªÙˆØ¯ÙŠÙˆ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ -->
            <div id="studio" class="content">
                <h3>ğŸ¬ Ø§Ù„Ø§Ø³ØªÙˆØ¯ÙŠÙˆ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ</h3>
                <p>ØªØ¯Ø±Ø¨ Ø¹Ù„Ù‰ Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆÙ‡Ø§Øª ÙˆØ§Ù‚Ø¹ÙŠØ© ÙÙŠ Ø¨ÙŠØ¦Ø© Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ø¢Ù…Ù†Ø©.</p>

                <div class="scenario-cards">
                    <div class="scenario-card" onclick="selectScenario('news')">
                        <h4>ğŸ“º Ù†Ø´Ø±Ø© Ø§Ù„Ø£Ø®Ø¨Ø§Ø±</h4>
                        <p>ØªØ¯Ø±Ø¨ Ø¹Ù„Ù‰ Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ø£Ø®Ø¨Ø§Ø± Ø¨Ø·Ø±ÙŠÙ‚Ø© Ø§Ø­ØªØ±Ø§ÙÙŠØ©</p>
                    </div>
                    <div class="scenario-card" onclick="selectScenario('interview')">
                        <h4>ğŸ¤ Ø§Ù„Ù…Ù‚Ø§Ø¨Ù„Ø© Ø§Ù„Ø¥Ø°Ø§Ø¹ÙŠØ©</h4>
                        <p>Ø£Ø¬Ø± Ù…Ù‚Ø§Ø¨Ù„Ø§Øª Ø¥Ø°Ø§Ø¹ÙŠØ© ÙˆØªÙ„ÙØ²ÙŠÙˆÙ†ÙŠØ©</p>
                    </div>
                    <div class="scenario-card" onclick="selectScenario('commercial')">
                        <h4>ğŸ“¢ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ø§Ù„ØªØ¬Ø§Ø±ÙŠ</h4>
                        <p>Ø£Ø¯Ø§Ø¡ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø¨Ø·Ø±ÙŠÙ‚Ø© Ù…Ù‚Ù†Ø¹Ø©</p>
                    </div>
                    <div class="scenario-card" onclick="selectScenario('presentation')">
                        <h4>ğŸ‘” Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„ØªÙ‚Ø¯ÙŠÙ…ÙŠ</h4>
                        <p>ØªÙ‚Ø¯ÙŠÙ… Ø§Ù„Ø¹Ø±ÙˆØ¶ Ø¨Ø«Ù‚Ø© ÙˆØ§Ø­ØªØ±Ø§ÙÙŠØ©</p>
                    </div>
                </div>

                <div id="scenarioContent" class="hidden" style="background: rgba(102, 126, 234, 0.1); padding: 20px; border-radius: 15px; margin: 20px 0;">
                    <h4 id="scenarioTitle"></h4>
                    <p id="scenarioScript" style="margin: 15px 0; font-style: italic;"></p>
                    <p id="scenarioTips" style="color: #666;"></p>
                </div>

                <div style="text-align: center;">
                    <button class="btn" id="studioStartBtn" onclick="startStudioSession()" disabled>ğŸ¬ Ø¨Ø¯Ø¡ Ø§Ù„ØªØ³Ø¬ÙŠÙ„</button>
                    <button class="btn" onclick="getPerformanceTips()">ğŸ’¡ Ù†ØµØ§Ø¦Ø­ Ø§Ù„Ø£Ø¯Ø§Ø¡</button>
                    <button class="btn" onclick="switchScenario()">ğŸ”„ ØªØºÙŠÙŠØ± Ø§Ù„Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ</button>
                </div>

                <div class="timer-display" id="studioTimer">00:00</div>
            </div>

            <!-- Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ© -->
            <div id="games" class="content">
                <h3>ğŸ® Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ©</h3>
                <p>ØªØ¹Ù„Ù… Ù…Ù† Ø®Ù„Ø§Ù„ Ø§Ù„Ù„Ø¹Ø¨ ÙˆØ§Ù„ØªØ­Ø¯ÙŠØ§Øª Ø§Ù„Ù…Ù…ØªØ¹Ø©.</p>

                <!-- ØªØ­Ø¯ÙŠ Ø§Ù„Ø³Ø±Ø¹Ø© -->
                <div class="game-area">
                    <h4>âš¡ ØªØ­Ø¯ÙŠ Ø§Ù„Ø³Ø±Ø¹Ø©</h4>
                    <p id="speedChallengeText">Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ "Ø¨Ø¯Ø¡ Ø§Ù„ØªØ­Ø¯ÙŠ" Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù†Øµ Ø§Ù„ØªØ¯Ø±ÙŠØ¨.</p>
                    <div class="timer-display" id="speedTimer">00:00</div>
                    <button class="btn" onclick="startSpeedChallenge()">ğŸƒâ€â™‚ï¸ Ø¨Ø¯Ø¡ Ø§Ù„ØªØ­Ø¯ÙŠ</button>
                    <button class="btn" id="speedCompleteBtn" onclick="completeSpeedChallenge()" disabled>âœ… Ø¥ÙƒÙ…Ø§Ù„</button>
                    <button class="btn" onclick="resetSpeedChallenge()">ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†</button>
                    <p>Ø£ÙØ¶Ù„ ÙˆÙ‚Øª: <span id="bestSpeedTime">--:--</span></p>
                </div>

                <!-- Ø´Ø®ØµÙŠØ§Øª Ù…Ø®ØªÙ„ÙØ© -->
                <div class="game-area">
                    <h4>ğŸ­ Ø´Ø®ØµÙŠØ§Øª Ù…Ø®ØªÙ„ÙØ©</h4>
                    <div style="display: flex; justify-content: center; gap: 10px; margin: 20px 0;">
                        <button class="btn" onclick="selectCharacter('narrator')">ğŸ“– Ø±Ø§ÙˆÙŠ</button>
                        <button class="btn" onclick="selectCharacter('anchor')">ğŸ“º Ù…Ø°ÙŠØ¹</button>
                        <button class="btn" onclick="selectCharacter('commercial')">ğŸ“¢ Ø¥Ø¹Ù„Ø§Ù†</button>
                        <button class="btn" onclick="selectCharacter('children')">ğŸ§¸ Ø£Ø·ÙØ§Ù„</button>
                    </div>
                    <div id="characterDisplay" style="text-align: center; padding: 20px; background: rgba(237, 100, 166, 0.1); border-radius: 10px;">
                        Ø§Ø®ØªØ± Ø´Ø®ØµÙŠØ© Ù„ØªØ¨Ø¯Ø£ Ø§Ù„ØªÙ…Ø±ÙŠÙ†
                    </div>
                    <p style="text-align: center; margin-top: 10px;">Ø´Ø®ØµÙŠØ§Øª Ù…ÙØ¤Ø¯Ø§Ø©: <span id="charactersPlayed">0</span></p>
                </div>

                <!-- ØªØ­Ø¯ÙŠ Ø§Ù„Ù†Ø·Ù‚ -->
                <div class="game-area">
                    <h4>ğŸ”¤ ØªØ­Ø¯ÙŠ Ø§Ù„Ù†Ø·Ù‚</h4>
                    <button class="btn" onclick="startPronunciationChallenge()">ğŸ¯ Ø¨Ø¯Ø¡ Ø§Ù„ØªØ­Ø¯ÙŠ</button>
                    <div id="pronunciationChallenge" style="text-align: center; padding: 20px; margin: 20px 0; background: rgba(72, 187, 120, 0.1); border-radius: 10px;">
                        Ø§Ø¶ØºØ· "Ø¨Ø¯Ø¡ Ø§Ù„ØªØ­Ø¯ÙŠ" Ù„Ø¨Ø¯Ø¡ ØªØ­Ø¯ÙŠ Ø§Ù„Ù†Ø·Ù‚
                    </div>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number" id="totalGamePoints">0</div>
                        <div>Ù†Ù‚Ø§Ø· Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨</div>
                    </div>
                </div>
            </div>

            <!-- ØªÙ‚Ø±ÙŠØ± Ø§Ù„ØªÙ‚Ø¯Ù… -->
            <div id="progress" class="content">
                <h3>ğŸ“Š ØªÙ‚Ø±ÙŠØ± Ø§Ù„ØªÙ‚Ø¯Ù…</h3>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number" id="totalTrainingSessions">0</div>
                        <div>Ø¬Ù„Ø³Ø§Øª Ø§Ù„ØªØ¯Ø±ÙŠØ¨</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="totalTrainingHours">0</div>
                        <div>Ø³Ø§Ø¹Ø§Øª Ø§Ù„ØªØ¯Ø±ÙŠØ¨</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="completionRate">0%</div>
                        <div>Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø¥ÙƒÙ…Ø§Ù„</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="averagePerformance">0</div>
                        <div>Ù…ØªÙˆØ³Ø· Ø§Ù„Ø£Ø¯Ø§Ø¡</div>
                    </div>
                </div>

                <div id="personalRecommendations" style="margin: 30px 0; padding: 20px; background: rgba(102, 126, 234, 0.1); border-radius: 15px;">
                    <h4>ğŸ’¡ Ø§Ù„ØªÙˆØµÙŠØ§Øª Ø§Ù„Ø´Ø®ØµÙŠØ©</h4>
                    <p>Ø§Ø¨Ø¯Ø£ Ø¨Ø§Ù„ØªØ¯Ø±ÙŠØ¨ Ù„ØªØ­ØµÙ„ Ø¹Ù„Ù‰ ØªÙˆØµÙŠØ§Øª Ù…Ø®ØµØµØ© Ù„Ùƒ!</p>
                </div>

                <div style="text-align: center; margin-top: 30px;">
                    <button class="btn" onclick="generateDetailedReport()">ğŸ“‹ ØªÙ‚Ø±ÙŠØ± Ù…ÙØµÙ„</button>
                    <button class="btn" onclick="exportProgress()">ğŸ’¾ ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
                    <button class="btn" onclick="setTrainingGoals()">ğŸ¯ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø£Ù‡Ø¯Ø§Ù</button>
                    <button class="btn" onclick="getPersonalizedPlan()">ğŸ“… Ø®Ø·Ø© Ù…Ø®ØµØµØ©</button>
                    <button class="btn" onclick="resetAllProgress()" style="background: #f56565;">ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†</button>
                </div>
            </div>

            <!-- Ø²Ø± ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ -->
            <div style="text-align: center; margin-top: 30px;">
                <button class="btn" onclick="logout()">ğŸšª ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬ ÙˆØ­ÙØ¸ Ø§Ù„ØªÙ‚Ø¯Ù…</button>
            </div>
        </div>
    </div>

    <!-- Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª -->
    <div id="notification" class="notification"></div>

    <script>
        // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
        let userData = {
            profile: {
                name: '',
                level: 'beginner',
                currentLevel: 1,
                xp: 0,
                joinDate: '',
                lastActiveDate: ''
            },
            skills: {
                breathing: 0,
                clarity: 0,
                expression: 0,
                confidence: 0
            },
            statistics: {
                totalSessions: 0,
                totalMinutes: 0,
                exercisesCompleted: 0,
                gamesPlayed: 0,
                currentStreak: 0,
                bestSpeedTime: null,
                charactersPlayed: 0,
                totalGamePoints: 0,
                breathingCycles: 0,
                breathingSessionTime: 0,
                breathingStreakDays: 0
            },
            achievements: [],
            settings: {
                soundEnabled: true,
                notificationsEnabled: true
            }
        };

        // Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
        let currentTimer = null;
        let breathingInterval = null;
        let isTrainingActive = false;
        let currentExercise = '';
        let selectedScenario = null;
        let gameStartTime = null;
        let currentCharacter = null;
        let currentWordIndex = 0;

        // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ¯Ø±ÙŠØ¨
        const scenarios = {
            news: {
                title: 'Ù†Ø´Ø±Ø© Ø§Ù„Ø£Ø®Ø¨Ø§Ø±',
                script: 'Ù…Ø³Ø§Ø¡ Ø§Ù„Ø®ÙŠØ±ØŒ Ø£Ù†Ø§ [Ø§Ø³Ù…Ùƒ] ÙˆØ£Ø±Ø­Ø¨ Ø¨ÙƒÙ… ÙÙŠ Ù†Ø´Ø±Ø© Ø£Ø®Ø¨Ø§Ø± Ø§Ù„Ø³Ø§Ø¹Ø© Ø§Ù„Ø«Ø§Ù…Ù†Ø©. ÙÙŠ Ø§Ù„Ø£Ø®Ø¨Ø§Ø± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ø§Ù„ÙŠÙˆÙ…...',
                tips: 'Ø­Ø§ÙØ¸ Ø¹Ù„Ù‰ Ù†Ø¨Ø±Ø© Ø¬Ø¯ÙŠØ© ÙˆÙ…Ù‡Ù†ÙŠØ©ØŒ Ø§Ù†Ø¸Ø± Ù…Ø¨Ø§Ø´Ø±Ø© Ù„Ù„ÙƒØ§Ù…ÙŠØ±Ø§ØŒ Ø§Ù‚Ø±Ø£ Ø¨ÙˆØ¶ÙˆØ­ ÙˆÙˆØªÙŠØ±Ø© Ù…Ù†Ø§Ø³Ø¨Ø©'
            },
            interview: {
                title: 'Ø§Ù„Ù…Ù‚Ø§Ø¨Ù„Ø© Ø§Ù„Ø¥Ø°Ø§Ø¹ÙŠØ©',
                script: 'Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨ÙƒÙ… ÙÙŠ Ø¨Ø±Ù†Ø§Ù…Ø¬ [Ø§Ø³Ù… Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬]ØŒ Ø£Ù†Ø§ [Ø§Ø³Ù…Ùƒ] ÙˆÙ…Ø¹ÙŠ Ø§Ù„ÙŠÙˆÙ… Ø¶ÙŠÙ Ù…Ù…ÙŠØ²...',
                tips: 'ÙƒÙ† ÙˆØ¯ÙˆØ¯Ø§Ù‹ ÙˆÙ…Ù‡ØªÙ…Ø§Ù‹ØŒ Ø§Ø³ØªØ®Ø¯Ù… Ù†Ø¨Ø±Ø© Ø¯Ø§ÙØ¦Ø©ØŒ Ø§Ø·Ø±Ø­ Ø£Ø³Ø¦Ù„Ø© ÙˆØ§Ø¶Ø­Ø©'
            },
            commercial: {
                title: 'Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ø§Ù„ØªØ¬Ø§Ø±ÙŠ',
                script: 'Ù‡Ù„ ØªØ¨Ø­Ø« Ø¹Ù† [Ø§Ù„Ù…Ù†ØªØ¬]ØŸ Ù„Ø¯ÙŠÙ†Ø§ Ø§Ù„Ø­Ù„ Ø§Ù„Ù…Ø«Ø§Ù„ÙŠ Ù„Ùƒ! Ù…Ù†ØªØ¬Ù†Ø§ Ø§Ù„Ø¬Ø¯ÙŠØ¯ ÙŠÙˆÙØ± Ù„Ùƒ...',
                tips: 'ÙƒÙ† Ù…ØªØ­Ù…Ø³Ø§Ù‹ ÙˆÙ…Ù‚Ù†Ø¹Ø§Ù‹ØŒ Ø§Ø³ØªØ®Ø¯Ù… Ù†Ø¨Ø±Ø© Ø¥ÙŠØ¬Ø§Ø¨ÙŠØ©ØŒ Ø£ÙƒØ¯ Ø¹Ù„Ù‰ Ø§Ù„ÙÙˆØ§Ø¦Ø¯'
            },
            presentation: {
                title: 'Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„ØªÙ‚Ø¯ÙŠÙ…ÙŠ',
                script: 'Ø§Ù„Ø³ÙŠØ¯Ø§Øª ÙˆØ§Ù„Ø³Ø§Ø¯Ø©ØŒ Ø£Ø±Ø­Ø¨ Ø¨ÙƒÙ… ÙÙŠ Ø¹Ø±Ø¶Ù†Ø§ Ø§Ù„ÙŠÙˆÙ… Ø­ÙˆÙ„ [Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹]. Ø³Ù†Ø³ØªØ¹Ø±Ø¶ Ù…Ø¹Ø§Ù‹...',
                tips: 'ØªØ­Ø¯Ø« Ø¨Ø«Ù‚Ø© ÙˆÙˆØ¶ÙˆØ­ØŒ Ø§Ø³ØªØ®Ø¯Ù… Ø¥ÙŠÙ…Ø§Ø¡Ø§Øª Ù…Ù†Ø§Ø³Ø¨Ø©ØŒ ØªÙØ§Ø¹Ù„ Ù…Ø¹ Ø§Ù„Ø¬Ù…Ù‡ÙˆØ±'
            }
        };

        const characters = {
            narrator: {
                name: 'Ø§Ù„Ø±Ø§ÙˆÙŠ',
                text: 'ÙÙŠ Ù‚Ø¯ÙŠÙ… Ø§Ù„Ø²Ù…Ø§Ù†ØŒ ÙƒØ§Ù† Ù‡Ù†Ø§Ùƒ Ù…Ù…Ù„ÙƒØ© Ø¨Ø¹ÙŠØ¯Ø© ØªØ­ÙƒÙ…Ù‡Ø§ Ù…Ù„ÙƒØ© Ø­ÙƒÙŠÙ…Ø©...',
                tips: 'Ø§Ø³ØªØ®Ø¯Ù… ØµÙˆØªØ§Ù‹ Ù‡Ø§Ø¯Ø¦Ø§Ù‹ ÙˆØºØ§Ù…Ø¶Ø§Ù‹ØŒ ØºÙŠÙ‘Ø± Ø§Ù„Ù†Ø¨Ø±Ø© Ø­Ø³Ø¨ Ø§Ù„Ø£Ø­Ø¯Ø§Ø«'
            },
            anchor: {
                name: 'Ø§Ù„Ù…Ø°ÙŠØ¹',
                text: 'Ø£Ù‡Ù„Ø§Ù‹ ÙˆÙ…Ø±Ø­Ø¨Ø§Ù‹ Ø¨ÙƒÙ… ÙÙŠ Ø¨Ø±Ù†Ø§Ù…Ø¬Ù†Ø§ Ø§Ù„Ù…Ø³Ø§Ø¦ÙŠØŒ Ø£Ù†Ø§ Ù…Ø°ÙŠØ¹ÙƒÙ… ÙˆØ£Ø³Ø¹Ø¯ Ø£ÙˆÙ‚Ø§ØªÙƒÙ… Ù…Ø¹Ø§Ù‹',
                tips: 'ÙƒÙ† ÙˆØ§Ø¶Ø­Ø§Ù‹ ÙˆÙ…Ù‡Ù†ÙŠØ§Ù‹ØŒ Ø§Ø³ØªØ®Ø¯Ù… Ù†Ø¨Ø±Ø© ÙˆØ¯ÙŠØ© ÙˆÙ…Ø±ÙŠØ­Ø©'
            },
            commercial: {
                name: 'Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†',
                text: 'Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ø«ÙˆØ±ÙŠ Ø§Ù„Ø¬Ø¯ÙŠØ¯! Ø§Ø­ØµÙ„ Ø¹Ù„ÙŠÙ‡ Ø§Ù„Ø¢Ù† Ø¨Ø®ØµÙ… 50%ØŒ Ø¹Ø±Ø¶ Ù…Ø­Ø¯ÙˆØ¯!',
                tips: 'ÙƒÙ† Ù…ØªØ­Ù…Ø³Ø§Ù‹ ÙˆÙ…Ù‚Ù†Ø¹Ø§Ù‹ØŒ Ø£ÙƒØ¯ Ø¹Ù„Ù‰ Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ù‡Ù…Ø©'
            },
            children: {
                name: 'Ø£Ø·ÙØ§Ù„',
                text: 'Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø£ØµØ¯Ù‚Ø§Ø¦ÙŠ Ø§Ù„ØµØºØ§Ø±! Ù‡Ù„ Ø£Ù†ØªÙ… Ù…Ø³ØªØ¹Ø¯ÙˆÙ† Ù„Ù„Ù…ØºØ§Ù…Ø±Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©ØŸ',
                tips: 'Ø§Ø³ØªØ®Ø¯Ù… ØµÙˆØªØ§Ù‹ Ù…Ø±Ø­Ø§Ù‹ ÙˆØ·ÙÙˆÙ„ÙŠØ§Ù‹ØŒ ÙƒÙ† Ù…ØªØ­Ù…Ø³Ø§Ù‹ ÙˆÙˆØ¯ÙˆØ¯Ø§Ù‹'
            }
        };

        const speedTexts = [
            'Ø§Ù„ØªØ¯Ø±ÙŠØ¨ Ø§Ù„Ù…Ø³ØªÙ…Ø± Ø¹Ù„Ù‰ Ù…Ù‡Ø§Ø±Ø§Øª Ø§Ù„Ø¥Ù„Ù‚Ø§Ø¡ ÙŠØ³Ø§Ø¹Ø¯ ÙÙŠ ØªØ·ÙˆÙŠØ± Ø§Ù„Ø«Ù‚Ø© ÙˆØ§Ù„Ø­Ø¶ÙˆØ± Ø§Ù„Ù…Ø³Ø±Ø­ÙŠ',
            'Ø§Ù„Ø¥Ø¹Ù„Ø§Ù… Ø§Ù„Ù…Ø¹Ø§ØµØ± ÙŠØªØ·Ù„Ø¨ Ù…Ù‡Ø§Ø±Ø§Øª Ù…ØªÙ‚Ø¯Ù…Ø© ÙÙŠ Ø§Ù„ØªÙˆØ§ØµÙ„ ÙˆØ§Ù„ØªØ¹Ø¨ÙŠØ± Ø§Ù„ÙˆØ§Ø¶Ø­',
            'ØªÙ‚Ù†ÙŠØ§Øª Ø§Ù„ØªÙ†ÙØ³ Ø§Ù„Ø³Ù„ÙŠÙ… Ù‡ÙŠ Ø§Ù„Ø£Ø³Ø§Ø³ Ù„Ø£ÙŠ Ø£Ø¯Ø§Ø¡ ØµÙˆØªÙŠ Ù…ØªÙ…ÙŠØ² ÙˆÙ…Ø¤Ø«Ø±',
            'Ø§Ù„Ù†Ø¬Ø§Ø­ ÙÙŠ Ù…Ø¬Ø§Ù„ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù… ÙŠØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ ØªØ¯Ø±ÙŠØ¨ Ø¯Ø§Ø¦Ù… ÙˆØªØ·ÙˆÙŠØ± Ù…Ø³ØªÙ…Ø± Ù„Ù„Ù…Ù‡Ø§Ø±Ø§Øª'
        ];

        const pronunciationWords = [
            'Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ©', 'Ø§Ù„Ø¯ÙŠÙ…Ù‚Ø±Ø§Ø·ÙŠØ©', 'Ø§Ù„ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§', 'Ø§Ù„Ø§Ù‚ØªØµØ§Ø¯', 'Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ©',
            'Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±', 'Ø§Ù„ØªØ·ÙˆÙŠØ±', 'Ø§Ù„Ø§Ø¨ØªÙƒØ§Ø±', 'Ø§Ù„Ù…Ø¤Ø³Ø³Ø©', 'Ø§Ù„Ø´Ø±Ø§ÙƒØ©'
        ];

        const smartAdvices = [
            'ØªØ°ÙƒØ± Ø£Ù† Ø§Ù„ØªÙ†ÙØ³ Ø§Ù„Ø¹Ù…ÙŠÙ‚ Ù‚Ø¨Ù„ Ø§Ù„Ø¨Ø¯Ø¡ ÙŠØ³Ø§Ø¹Ø¯ ÙÙŠ ØªÙ‡Ø¯Ø¦Ø© Ø§Ù„Ø£Ø¹ØµØ§Ø¨ ÙˆØªØ­Ø³ÙŠÙ† Ø§Ù„Ø£Ø¯Ø§Ø¡',
            'Ù…Ø§Ø±Ø³ Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ø¬Ù‡Ø±ÙŠØ© ÙŠÙˆÙ…ÙŠØ§Ù‹ Ù„Ù…Ø¯Ø© 10 Ø¯Ù‚Ø§Ø¦Ù‚ Ù„ØªØ­Ø³ÙŠÙ† ÙˆØ¶ÙˆØ­ Ø§Ù„Ù†Ø·Ù‚',
            'Ø³Ø¬Ù„ ØµÙˆØªÙƒ ÙˆØ§Ø³ØªÙ…Ø¹ Ø¥Ù„ÙŠÙ‡ Ù„ØªØ­Ø¯ÙŠØ¯ Ù†Ù‚Ø§Ø· Ø§Ù„Ù‚ÙˆØ© ÙˆØ§Ù„Ø¶Ø¹Ù ÙÙŠ Ø£Ø¯Ø§Ø¦Ùƒ',
            'ØªØ¯Ø±Ø¨ Ø£Ù…Ø§Ù… Ø§Ù„Ù…Ø±Ø¢Ø© Ù„ØªØ­Ø³ÙŠÙ† ØªØ¹Ø§Ø¨ÙŠØ± Ø§Ù„ÙˆØ¬Ù‡ ÙˆØ§Ù„Ø¥ÙŠÙ…Ø§Ø¡Ø§Øª',
            'Ø§Ø´Ø±Ø¨ Ø§Ù„Ù…Ø§Ø¡ Ø¨Ø§Ù†ØªØ¸Ø§Ù… Ù„Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ ØªØ±Ø·ÙŠØ¨ Ø§Ù„Ø­Ø¨Ø§Ù„ Ø§Ù„ØµÙˆØªÙŠØ©'
        ];

        // ÙˆØ¸Ø§Ø¦Ù Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
        function initializeApp() {
            setupEventListeners();
            loadUserData();
        }

        function setupEventListeners() {
            document.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    const target = this.getAttribute('data-target');
                    switchTab(target, this);
                });
            });

            window.addEventListener('beforeunload', saveUserData);
            setInterval(saveUserData, 30000);

            document.getElementById('userName').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    startTraining();
                }
            });
        }

        function switchTab(targetId, tabElement) {
            document.querySelectorAll('.content').forEach(content => {
                content.classList.remove('active');
            });

            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });

            const targetContent = document.getElementById(targetId);
            if (targetContent) {
                targetContent.classList.add('active');
                tabElement.classList.add('active');
            }
        }

        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = `notification ${type} show`;
            setTimeout(() => {
                notification.classList.remove('show');
            }, 4000);
        }

        function saveUserData() {
            if (userData.profile.name) {
                userData.profile.lastActiveDate = new Date().toISOString();
                const dataStr = JSON.stringify(userData);
                // Ù…Ø­Ø§ÙƒØ§Ø© Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ Ø³ØªØ­ÙØ¸ ÙÙŠ localStorage)
                console.log('ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:', dataStr.length, 'Ø­Ø±Ù');
            }
        }

        function loadUserData() {
            // Ù…Ø­Ø§ÙƒØ§Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©
            console.log('ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©');
        }

        // ÙˆØ¸Ø§Ø¦Ù ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
        function startTraining() {
            const userName = document.getElementById('userName').value.trim();
            const userLevel = document.getElementById('userLevel').value;

            if (!userName) {
                showNotification('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù…Ùƒ ÙƒØ§Ù…Ù„Ø§Ù‹', 'error');
                return;
            }

            if (userName.length < 3) {
                showNotification('Ø§Ù„Ø§Ø³Ù… ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† 3 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„', 'error');
                return;
            }

            userData.profile.name = userName;
            userData.profile.level = userLevel;
            userData.profile.joinDate = new Date().toISOString();

            showMainInterface();
            showNotification(`ğŸ‰ Ù…Ø±Ø­Ø¨Ø§Ù‹ ${userName}! Ø¨Ø¯Ø£Øª Ø±Ø­Ù„ØªÙƒ Ø§Ù„ØªØ¯Ø±ÙŠØ¨ÙŠØ©`, 'success');
        }

        function loadExistingUser() {
            // Ù…Ø­Ø§ÙƒØ§Ø© ØªØ­Ù…ÙŠÙ„ Ù…Ø³ØªØ®Ø¯Ù… Ù…ÙˆØ¬ÙˆØ¯
            userData.profile.name = 'Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯';
            userData.profile.level = 'intermediate';
            userData.profile.xp = 1250;
            userData.skills.breathing = 45;
            userData.skills.clarity = 60;
            userData.skills.expression = 35;
            userData.skills.confidence = 50;
            userData.statistics.exercisesCompleted = 15;
            userData.statistics.totalMinutes = 120;
            userData.statistics.gamesPlayed = 8;

            document.getElementById('userName').value = userData.profile.name;
            showMainInterface();
            showNotification(`ğŸ‰ Ù…Ø±Ø­Ø¨Ø§Ù‹ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ ${userData.profile.name}!`, 'success');
        }

        function showDemo() {
            showNotification('ğŸ¬ Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„ØªÙˆØ¶ÙŠØ­ÙŠ Ù…ØªØ§Ø­ Ù‚Ø±ÙŠØ¨Ø§Ù‹!', 'info');
        }

        function showMainInterface() {
            document.getElementById('loginSection').classList.add('hidden');
            document.getElementById('mainContent').classList.remove('hidden');
            updateAllUI();
        }

        function updateAllUI() {
            updateProgressDisplay();
            updateSkillBars();
            updateStatistics();
        }

        function updateProgressDisplay() {
            const levelNames = ['Ø§Ù„Ù…Ø¨ØªØ¯Ø¦', 'Ø§Ù„Ù…ØªÙ‚Ø¯Ù…', 'Ø§Ù„Ù…Ø­ØªØ±Ù', 'Ø§Ù„Ø®Ø¨ÙŠØ±', 'Ø§Ù„Ø£Ø³Ø·ÙˆØ±Ø©'];
            const currentLevel = Math.min(Math.floor(userData.profile.xp / 1000) + 1, 5);
            userData.profile.currentLevel = currentLevel;

            document.getElementById('levelDisplay').textContent = 
                `${userData.profile.name} - ${levelNames[currentLevel - 1]} (Ø§Ù„Ù…Ø³ØªÙˆÙ‰ ${currentLevel})`;
            document.getElementById('xpDisplay').textContent = userData.profile.xp;
            document.getElementById('levelNumber').textContent = currentLevel;
        }

        function updateSkillBars() {
            updateSkillBar('breathing', userData.skills.breathing);
            updateSkillBar('clarity', userData.skills.clarity);
            updateSkillBar('expression', userData.skills.expression);
            updateSkillBar('confidence', userData.skills.confidence);
        }

        function updateSkillBar(skill, points) {
            const percentage = Math.min((points / 100) * 100, 100);
            document.getElementById(`${skill}Percent`).textContent = `${Math.round(percentage)}%`;
            document.getElementById(`${skill}Bar`).style.width = `${percentage}%`;
        }

        function updateStatistics() {
            document.getElementById('exercisesCompleted').textContent = userData.statistics.exercisesCompleted;
            document.getElementById('trainingMinutes').textContent = userData.statistics.totalMinutes;
            document.getElementById('currentStreak').textContent = userData.statistics.currentStreak;
            document.getElementById('gamesPlayedCount').textContent = userData.statistics.gamesPlayed;
            document.getElementById('totalGamePoints').textContent = userData.statistics.totalGamePoints;
            document.getElementById('breathingCycles').textContent = userData.statistics.breathingCycles;
            document.getElementById('breathingSessionTime').textContent = userData.statistics.breathingSessionTime;
            document.getElementById('breathingStreakDays').textContent = userData.statistics.breathingStreakDays;

            const breathingLevel = userData.skills.breathing < 25 ? 'Ù…Ø¨ØªØ¯Ø¦' : 
                                 userData.skills.breathing < 50 ? 'Ù…ØªÙˆØ³Ø·' : 
                                 userData.skills.breathing < 75 ? 'Ù…ØªÙ‚Ø¯Ù…' : 'Ø®Ø¨ÙŠØ±';
            document.getElementById('breathingLevel').textContent = breathingLevel;

            if (userData.statistics.bestSpeedTime) {
                document.getElementById('bestSpeedTime').textContent = userData.statistics.bestSpeedTime;
            }

            document.getElementById('charactersPlayed').textContent = userData.statistics.charactersPlayed;
            document.getElementById('totalTrainingSessions').textContent = userData.statistics.totalSessions;
            document.getElementById('totalTrainingHours').textContent = Math.round(userData.statistics.totalMinutes / 60);

            const totalExercises = userData.statistics.exercisesCompleted + userData.statistics.gamesPlayed;
            const completionRate = totalExercises > 0 ? Math.round((userData.statistics.exercisesCompleted / totalExercises) * 100) : 0;
            document.getElementById('completionRate').textContent = `${completionRate}%`;

            const avgPerformance = Math.round((userData.skills.breathing + userData.skills.clarity + userData.skills.expression + userData.skills.confidence) / 4);
            document.getElementById('averagePerformance').textContent = avgPerformance;
        }

        // ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù…Ø¯Ø±Ø¨ Ø§Ù„Ø°ÙƒÙŠ
        function getSmartAdvice() {
            const randomAdvice = smartAdvices[Math.floor(Math.random() * smartAdvices.length)];
            document.getElementById('aiAdvice').innerHTML = `
                <h4>ğŸ’¡ Ù†ØµÙŠØ­Ø© Ø°ÙƒÙŠØ© Ù…Ø®ØµØµØ© Ù„Ùƒ</h4>
                <p>${randomAdvice}</p>
                <p><strong>ğŸ¯ Ø®Ø·ÙˆØ© Ø¹Ù…Ù„ÙŠØ©:</strong> Ø¬Ø±Ø¨ ØªØ·Ø¨ÙŠÙ‚ Ù‡Ø°Ù‡ Ø§Ù„Ù†ØµÙŠØ­Ø© Ù„Ù…Ø¯Ø© 5 Ø¯Ù‚Ø§Ø¦Ù‚ Ø§Ù„Ø¢Ù† ÙˆØ§Ø´Ø¹Ø± Ø¨Ø§Ù„ÙØ±Ù‚!</p>
            `;
            addExperiencePoints(5);
            showNotification('ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ù†ØµÙŠØ­Ø© Ø°ÙƒÙŠØ© Ù…Ø®ØµØµØ© Ù„Ùƒ!', 'info');
        }

        function getDailyChallenge() {
            const challenges = [
                "ğŸ¯ ØªØ­Ø¯ÙŠ Ø§Ù„ÙŠÙˆÙ…: Ø§Ù‚Ø±Ø£ Ù†Øµ Ø¥Ø®Ø¨Ø§Ø±ÙŠ Ù„Ù…Ø¯Ø© 3 Ø¯Ù‚Ø§Ø¦Ù‚ Ø¨ÙˆØ¶ÙˆØ­",
                "ğŸ­ ØªØ­Ø¯ÙŠ Ø§Ù„ÙŠÙˆÙ…: Ù…Ø§Ø±Ø³ Ø£ØµÙˆØ§Øª 3 Ø´Ø®ØµÙŠØ§Øª Ù…Ø®ØªÙ„ÙØ©",
                "ğŸ§˜ ØªØ­Ø¯ÙŠ Ø§Ù„ÙŠÙˆÙ…: ØªÙ…Ø±ÙŠÙ† ØªÙ†ÙØ³ Ø¹Ù…ÙŠÙ‚ Ù„Ù…Ø¯Ø© 5 Ø¯Ù‚Ø§Ø¦Ù‚",
                "ğŸ—£ï¸ ØªØ­Ø¯ÙŠ Ø§Ù„ÙŠÙˆÙ…: Ø§Ù†Ø·Ù‚ 20 ÙƒÙ„Ù…Ø© ØµØ¹Ø¨Ø© Ø¨ÙˆØ¶ÙˆØ­",
                "ğŸµ ØªØ­Ø¯ÙŠ Ø§Ù„ÙŠÙˆÙ…: ØºÙŠÙ‘Ø± Ù†Ø¨Ø±Ø© ØµÙˆØªÙƒ 5 Ù…Ø±Ø§Øª ÙÙŠ Ø¬Ù…Ù„Ø© ÙˆØ§Ø­Ø¯Ø©"
            ];
            const randomChallenge = challenges[Math.floor(Math.random() * challenges.length)];
            document.getElementById('aiAdvice').innerHTML = `
                <h4>ğŸ¯ ØªØ­Ø¯ÙŠ Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ</h4>
                <p>${randomChallenge}</p>
                <p><strong>ğŸ† Ù…ÙƒØ§ÙØ£Ø© Ø§Ù„Ø¥ÙƒÙ…Ø§Ù„:</strong> +20 Ù†Ù‚Ø·Ø© Ø®Ø¨Ø±Ø© Ø¹Ù†Ø¯ Ø¥Ù†Ø¬Ø§Ø² Ø§Ù„ØªØ­Ø¯ÙŠ!</p>
            `;
            showNotification('ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ ØªØ­Ø¯ÙŠ ÙŠÙˆÙ…ÙŠ Ø¬Ø¯ÙŠØ¯ Ù„Ùƒ!', 'warning');
        }

        function startQuickAssessment() {
            const scores = {
                overall: Math.floor(Math.random() * 30) + 70,
                clarity: Math.floor(Math.random() * 30) + 60,
                confidence: Math.floor(Math.random() * 40) + 60,
                expression: Math.floor(Math.random() * 35) + 65
            };

            document.getElementById('overallScore').textContent = scores.overall;
            document.getElementById('clarityScore').textContent = scores.clarity;
            document.getElementById('confidenceScore').textContent = scores.confidence;
            document.getElementById('expressionScore').textContent = scores.expression;
            document.getElementById('assessmentResults').classList.remove('hidden');

            addExperiencePoints(10);
            userData.statistics.exercisesCompleted += 1;
            updateAllUI();
            showNotification('ØªÙ… Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø³Ø±ÙŠØ¹! Ø±Ø§Ø¬Ø¹ Ù†ØªØ§Ø¦Ø¬Ùƒ', 'success');
        }

        // ÙˆØ¸Ø§Ø¦Ù ØªÙ…Ø§Ø±ÙŠÙ† Ø§Ù„ØªÙ†ÙØ³
        function startBreathingExercise() {
            if (!isTrainingActive) {
                startBasicBreathing();
            }
        }

        function startBasicBreathing() {
            startBreathingPattern(4, 4, 4, 'ØªÙ†ÙØ³ Ø£Ø³Ø§Ø³ÙŠ');
        }

        function startAdvancedBreathing() {
            startBreathingPattern(4, 7, 8, 'ØªÙ†ÙØ³ Ù…ØªÙ‚Ø¯Ù…');
        }

        function startGuidedBreathing() {
            startBreathingPattern(6, 4, 6, 'ØªÙ†ÙØ³ Ù…ÙˆØ¬Ù‡');
        }

        function startBreathingPattern(inhale, hold, exhale, name) {
            if (isTrainingActive) {
                stopAllBreathing();
                return;
            }

            isTrainingActive = true;
            currentExercise = name;
            document.getElementById('stopBreathingBtn').disabled = false;
            document.getElementById('breathingText').textContent = 'Ø§Ø³ØªØ¹Ø¯...';

            let phase = 'ready';
            let counter = 3;
            let cycles = 0;
            const circle = document.getElementById('breathingCircle');

            breathingInterval = setInterval(() => {
                switch(phase) {
                    case 'ready':
                        document.getElementById('breathingText').textContent = `${counter}`;
                        counter--;
                        if (counter < 0) {
                            phase = 'inhale';
                            counter = inhale;
                            circle.classList.add('inhale');
                        }
                        break;

                    case 'inhale':
                        document.getElementById('breathingText').textContent = `Ø´Ù‡ÙŠÙ‚ ${counter}`;
                        counter--;
                        if (counter < 0) {
                            phase = 'hold';
                            counter = hold;
                            circle.classList.remove('inhale');
                        }
                        break;

                    case 'hold':
                        document.getElementById('breathingText').textContent = `Ø§Ø­Ø¨Ø³ ${counter}`;
                        counter--;
                        if (counter < 0) {
                            phase = 'exhale';
                            counter = exhale;
                            circle.classList.add('exhale');
                        }
                        break;

                    case 'exhale':
                        document.getElementById('breathingText').textContent = `Ø²ÙÙŠØ± ${counter}`;
                        counter--;
                        if (counter < 0) {
                            cycles++;
                            userData.statistics.breathingCycles++;
                            document.getElementById('breathingCycles').textContent = userData.statistics.breathingCycles;
                            phase = 'inhale';
                            counter = inhale;
                            circle.classList.remove('exhale');
                            circle.classList.add('inhale');

                            if (cycles >= 5) {
                                completeBreathingSession();
                            }
                        }
                        break;
                }
            }, 1000);

            const startTime = Date.now();
            currentTimer = setInterval(() => {
                const elapsed = Math.floor((Date.now() - startTime) / 1000);
                const minutes = Math.floor(elapsed / 60);
                const seconds = elapsed % 60;
                document.getElementById('breathingTimer').textContent = 
                    `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }, 1000);

            showNotification(`Ø¨Ø¯Ø¡ ØªÙ…Ø±ÙŠÙ† ${name} - 5 Ø¯ÙˆØ±Ø§Øª`, 'info');
        }

        function stopAllBreathing() {
            if (breathingInterval) {
                clearInterval(breathingInterval);
                breathingInterval = null;
            }
            if (currentTimer) {
                clearInterval(currentTimer);
                currentTimer = null;
            }

            isTrainingActive = false;
            const circle = document.getElementById('breathingCircle');
            circle.classList.remove('inhale', 'exhale');
            document.getElementById('breathingText').textContent = 'Ø§Ø¶ØºØ· Ù„Ø¨Ø¯Ø¡ Ø§Ù„ØªÙ…Ø±ÙŠÙ†';
            document.getElementById('stopBreathingBtn').disabled = true;
            showNotification('ØªÙ… Ø¥ÙŠÙ‚Ø§Ù ØªÙ…Ø±ÙŠÙ† Ø§Ù„ØªÙ†ÙØ³', 'warning');
        }

        function completeBreathingSession() {
            stopAllBreathing();
            userData.skills.breathing += 5;
            userData.statistics.exercisesCompleted += 1;
            userData.statistics.breathingSessionTime += 1;
            addExperiencePoints(15);
            updateAllUI();
            showNotification(`ğŸ‰ Ù…Ù…ØªØ§Ø²! Ø£ÙƒÙ…Ù„Øª ØªÙ…Ø±ÙŠÙ† ${currentExercise}. +15 Ù†Ù‚Ø·Ø© Ø®Ø¨Ø±Ø©`, 'success');
        }

        // ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ø§Ø³ØªÙˆØ¯ÙŠÙˆ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ
        function selectScenario(scenarioType) {
            selectedScenario = scenarioType;
            const scenario = scenarios[scenarioType];

            document.querySelectorAll('.scenario-card').forEach(card => {
                card.classList.remove('selected');
            });

            event.target.closest('.scenario-card').classList.add('selected');

            document.getElementById('scenarioTitle').textContent = scenario.title;
            document.getElementById('scenarioScript').textContent = scenario.script;
            document.getElementById('scenarioTips').textContent = scenario.tips;
            document.getElementById('scenarioContent').classList.remove('hidden');
            document.getElementById('studioStartBtn').disabled = false;

            showNotification(`ØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ: ${scenario.title}`, 'info');
        }

        function startStudioSession() {
            if (!selectedScenario) {
                showNotification('ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ Ø£ÙˆÙ„Ø§Ù‹', 'error');
                return;
            }

            const startTime = Date.now();
            currentTimer = setInterval(() => {
                const elapsed = Math.floor((Date.now() - startTime) / 1000);
                const minutes = Math.floor(elapsed / 60);
                const seconds = elapsed % 60;
                document.getElementById('studioTimer').textContent = 
                    `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }, 1000);

            setTimeout(() => {
                completeStudioSession();
            }, 30000);

            showNotification('ğŸ¬ Ø¨Ø¯Ø£Øª Ø¬Ù„Ø³Ø© Ø§Ù„ØªØ³Ø¬ÙŠÙ„! Ø§Ù‚Ø±Ø£ Ø§Ù„Ù†Øµ Ø¨ØµÙˆØª ÙˆØ§Ø¶Ø­', 'info');
        }

        function completeStudioSession() {
            if (currentTimer) {
                clearInterval(currentTimer);
                currentTimer = null;
            }

            userData.skills.expression += 8;
            userData.skills.confidence += 6;
            userData.statistics.exercisesCompleted += 1;
            addExperiencePoints(20);
            updateAllUI();
            showNotification('ğŸ‰ Ù…Ù…ØªØ§Ø²! Ø£ÙƒÙ…Ù„Øª Ø¬Ù„Ø³Ø© Ø§Ù„Ø§Ø³ØªÙˆØ¯ÙŠÙˆ. +20 Ù†Ù‚Ø·Ø© Ø®Ø¨Ø±Ø©', 'success');
        }

        function getPerformanceTips() {
            const tips = [
                "ğŸ¯ Ø­Ø§ÙØ¸ Ø¹Ù„Ù‰ Ø§Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„Ø¨ØµØ±ÙŠ Ù…Ø¹ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§",
                "ğŸ—£ï¸ Ø§Ø³ØªØ®Ø¯Ù… Ø¥ÙŠÙ…Ø§Ø¡Ø§Øª Ø·Ø¨ÙŠØ¹ÙŠØ© Ù„ØªØ¹Ø²ÙŠØ² Ø±Ø³Ø§Ù„ØªÙƒ",
                "ğŸµ ØºÙŠÙ‘Ø± ÙÙŠ Ù†Ø¨Ø±Ø© ØµÙˆØªÙƒ Ù„ØªØ¬Ù†Ø¨ Ø§Ù„Ù…Ù„Ù„",
                "ğŸ’ª Ø§Ø¬Ù„Ø³ Ø£Ùˆ Ù‚Ù Ø¨Ø«Ù‚Ø© ÙˆØ§Ø³ØªÙ‚Ø§Ù…Ø©",
                "ğŸ§˜ ØªÙ†ÙØ³ Ø¨Ø¹Ù…Ù‚ Ù‚Ø¨Ù„ Ø§Ù„Ø¨Ø¯Ø¡ Ù„ØªÙ‡Ø¯Ø¦Ø© Ø§Ù„Ø£Ø¹ØµØ§Ø¨"
            ];
            const randomTip = tips[Math.floor(Math.random() * tips.length)];
            showNotification(randomTip, 'info');
        }

        function switchScenario() {
            selectedScenario = null;
            document.getElementById('scenarioContent').classList.add('hidden');
            document.getElementById('studioStartBtn').disabled = true;
            document.querySelectorAll('.scenario-card').forEach(card => {
                card.classList.remove('selected');
            });
            showNotification('Ø§Ø®ØªØ± Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ Ø¬Ø¯ÙŠØ¯ Ù„Ù„ØªØ¯Ø±ÙŠØ¨', 'info');
        }

        // ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ©
        function startSpeedChallenge() {
            const randomText = speedTexts[Math.floor(Math.random() * speedTexts.length)];
            document.getElementById('speedChallengeText').textContent = randomText;
            gameStartTime = Date.now();
            document.getElementById('speedCompleteBtn').disabled = false;

            currentTimer = setInterval(() => {
                const elapsed = Math.floor((Date.now() - gameStartTime) / 1000);
                const minutes = Math.floor(elapsed / 60);
                const seconds = elapsed % 60;
                document.getElementById('speedTimer').textContent = 
                    `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }, 1000);

            showNotification('ğŸƒâ€â™‚ï¸ Ø¨Ø¯Ø£ ØªØ­Ø¯ÙŠ Ø§Ù„Ø³Ø±Ø¹Ø©! Ø§Ù‚Ø±Ø£ Ø§Ù„Ù†Øµ Ø¨Ø£Ø³Ø±Ø¹ ÙˆØ£ÙˆØ¶Ø­ Ù…Ø§ ÙŠÙ…ÙƒÙ†', 'warning');
        }

        function completeSpeedChallenge() {
            if (!gameStartTime) return;

            const elapsed = Math.floor((Date.now() - gameStartTime) / 1000);
            const minutes = Math.floor(elapsed / 60);
            const seconds = elapsed % 60;
            const timeString = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;

            if (currentTimer) {
                clearInterval(currentTimer);
                currentTimer = null;
            }

            if (!userData.statistics.bestSpeedTime || elapsed < parseTimeString(userData.statistics.bestSpeedTime)) {
                userData.statistics.bestSpeedTime = timeString;
                showNotification('ğŸ† Ø±Ù‚Ù… Ù‚ÙŠØ§Ø³ÙŠ Ø¬Ø¯ÙŠØ¯!', 'success');
            }

            userData.skills.clarity += 7;
            userData.statistics.gamesPlayed += 1;
            userData.statistics.totalGamePoints += Math.max(100 - elapsed, 10);
            addExperiencePoints(12);
            document.getElementById('speedCompleteBtn').disabled = true;
            gameStartTime = null;
            updateAllUI();

            showNotification(`âš¡ Ù…Ù…ØªØ§Ø²! Ø£ÙƒÙ…Ù„Øª Ø§Ù„ØªØ­Ø¯ÙŠ ÙÙŠ ${timeString}. +12 Ù†Ù‚Ø·Ø© Ø®Ø¨Ø±Ø©`, 'success');
        }

        function resetSpeedChallenge() {
            if (currentTimer) {
                clearInterval(currentTimer);
                currentTimer = null;
            }
            gameStartTime = null;
            document.getElementById('speedTimer').textContent = '00:00';
            document.getElementById('speedCompleteBtn').disabled = true;
            document.getElementById('speedChallengeText').textContent = 'Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ "Ø¨Ø¯Ø¡ Ø§Ù„ØªØ­Ø¯ÙŠ" Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù†Øµ Ø§Ù„ØªØ¯Ø±ÙŠØ¨.';
            showNotification('ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„ØªØ­Ø¯ÙŠ', 'info');
        }

        function selectCharacter(characterType) {
            currentCharacter = characterType;
            const character = characters[characterType];

            document.getElementById('characterDisplay').innerHTML = `
                <h4>ğŸ­ ${character.name}</h4>
                <p style="font-style: italic; margin: 15px 0;">"${character.text}"</p>
                <p><strong>ğŸ’¡ Ø¥Ø±Ø´Ø§Ø¯Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡:</strong><br>${character.tips}</p>
            `;

            userData.statistics.charactersPlayed += 1;
            userData.skills.expression += 4;
            userData.statistics.totalGamePoints += 15;
            addExperiencePoints(8);
            updateAllUI();

            showNotification(`ğŸ­ Ø§Ø®ØªØ±Øª Ø´Ø®ØµÙŠØ© ${character.name}. +8 Ù†Ù‚Ø§Ø· Ø®Ø¨Ø±Ø©`, 'success');
        }

        function startPronunciationChallenge() {
            currentWordIndex = 0;
            displayCurrentWord();
            showNotification('ğŸ”¤ Ø¨Ø¯Ø£ ØªØ­Ø¯ÙŠ Ø§Ù„Ù†Ø·Ù‚! Ø§Ù†Ø·Ù‚ Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø¨ÙˆØ¶ÙˆØ­', 'info');
        }

        function displayCurrentWord() {
            if (currentWordIndex < pronunciationWords.length) {
                const word = pronunciationWords[currentWordIndex];
                document.getElementById('pronunciationChallenge').innerHTML = `
                    <h4>ÙƒÙ„Ù…Ø© Ø±Ù‚Ù… ${currentWordIndex + 1}:</h4>
                    <p style="font-size: 1.5em; font-weight: bold; margin: 20px 0;">${word}</p>
                    <p>Ø§Ù†Ø·Ù‚ Ù‡Ø°Ù‡ Ø§Ù„ÙƒÙ„Ù…Ø© Ø¨ÙˆØ¶ÙˆØ­ ÙˆØ¯Ù‚Ø©</p>
                    <button class="btn" onclick="nextWord()">âœ… Ø§Ù„ØªØ§Ù„ÙŠ</button>
                `;
            } else {
                completePronunciationChallenge();
            }
        }

        function nextWord() {
            if (currentWordIndex < pronunciationWords.length) {
                userData.skills.clarity += 3;
                userData.statistics.totalGamePoints += 10;
                addExperiencePoints(5);
                currentWordIndex++;
                displayCurrentWord();
                showNotification('âœ… Ù…Ù…ØªØ§Ø²! +5 Ù†Ù‚Ø§Ø· Ø®Ø¨Ø±Ø©', 'success');
                updateAllUI();
            }
        }

        function completePronunciationChallenge() {
            document.getElementById('pronunciationChallenge').innerHTML = `
                <h4>ğŸ‰ ØªÙ‡Ø§Ù†ÙŠÙ†Ø§! Ø£ÙƒÙ…Ù„Øª ØªØ­Ø¯ÙŠ Ø§Ù„Ù†Ø·Ù‚</h4>
                <p>Ù†Ø·Ù‚Øª Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø¨Ù†Ø¬Ø§Ø­!</p>
                <p><strong>+25 Ù†Ù‚Ø·Ø© Ø®Ø¨Ø±Ø© Ø¥Ø¶Ø§ÙÙŠØ©</strong></p>
                <button class="btn" onclick="startPronunciationChallenge()">ğŸ”„ ØªØ­Ø¯ÙŠ Ø¬Ø¯ÙŠØ¯</button>
            `;

            userData.statistics.gamesPlayed += 1;
            addExperiencePoints(25);
            updateAllUI();
            showNotification('ğŸ† Ù…Ø¨Ø±ÙˆÙƒ! Ø£ÙƒÙ…Ù„Øª ØªØ­Ø¯ÙŠ Ø§Ù„Ù†Ø·Ù‚ Ø§Ù„Ù…Ø«Ø§Ù„ÙŠ', 'success');
        }

        // ÙˆØ¸Ø§Ø¦Ù ØªÙ‚Ø±ÙŠØ± Ø§Ù„ØªÙ‚Ø¯Ù…
        function generateDetailedReport() {
            const report = `
ØªÙ‚Ø±ÙŠØ± Ø§Ù„ØªÙ‚Ø¯Ù… Ø§Ù„Ø´Ø§Ù…Ù„ - ${userData.profile.name}
========================================

ğŸ“Š Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø¹Ø§Ù…Ø©:
- Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø­Ø§Ù„ÙŠ: ${userData.profile.currentLevel}
- Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ù†Ù‚Ø§Ø· Ø§Ù„Ø®Ø¨Ø±Ø©: ${userData.profile.xp}
- Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¬Ù„Ø³Ø§Øª: ${userData.statistics.totalSessions}
- Ø³Ø§Ø¹Ø§Øª Ø§Ù„ØªØ¯Ø±ÙŠØ¨: ${Math.round(userData.statistics.totalMinutes / 60)}

ğŸ¯ Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª Ø§Ù„ØµÙˆØªÙŠØ©:
- Ø§Ù„ØªÙ†ÙØ³ ÙˆØ§Ù„ØªØ­ÙƒÙ…: ${userData.skills.breathing}%
- ÙˆØ¶ÙˆØ­ Ø§Ù„Ù†Ø·Ù‚: ${userData.skills.clarity}%
- Ø§Ù„ØªØ¹Ø¨ÙŠØ± ÙˆØ§Ù„ØªÙ†ØºÙŠÙ…: ${userData.skills.expression}%
- Ø§Ù„Ø«Ù‚Ø© ÙˆØ§Ù„Ø­Ø¶ÙˆØ±: ${userData.skills.confidence}%

ğŸ® Ø¥Ù†Ø¬Ø§Ø²Ø§Øª Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨:
- Ø£Ù„Ø¹Ø§Ø¨ Ù…ÙƒØªÙ…Ù„Ø©: ${userData.statistics.gamesPlayed}
- Ù†Ù‚Ø§Ø· Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨: ${userData.statistics.totalGamePoints}
- Ø´Ø®ØµÙŠØ§Øª Ù…ÙØ¤Ø¯Ø§Ø©: ${userData.statistics.charactersPlayed}

ğŸ’¡ Ø§Ù„ØªÙˆØµÙŠØ§Øª:
${generatePersonalRecommendations()}

ØªØ§Ø±ÙŠØ® Ø§Ù„ØªÙ‚Ø±ÙŠØ±: ${new Date().toLocaleDateString('ar-SA')}
            `;

            // Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„Ù Ù†ØµÙŠ Ù„Ù„ØªØ­Ù…ÙŠÙ„ (Ù…Ø­Ø§ÙƒØ§Ø©)
            showNotification('ğŸ“‹ ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù…ÙØµÙ„', 'success');
            
            // Ø¹Ø±Ø¶ Ø§Ù„ØªÙ‚Ø±ÙŠØ± ÙÙŠ Ø§Ù„Ù†Ø§ÙØ°Ø©
            const reportWindow = window.open('', '_blank');
            reportWindow.document.write(`
                <html dir="rtl">
                <head>
                    <title>ØªÙ‚Ø±ÙŠØ± Ø§Ù„ØªÙ‚Ø¯Ù…</title>
                    <style>
                        body { font-family: Arial, sans-serif; padding: 20px; line-height: 1.6; }
                        pre { white-space: pre-wrap; }
                    </style>
                </head>
                <body>
                    <pre>${report}</pre>
                </body>
                </html>
            `);
        }

        function generatePersonalRecommendations() {
            const recommendations = [];
            
            if (userData.skills.breathing < 50) {
                recommendations.push('â€¢ Ø±ÙƒØ² Ø¹Ù„Ù‰ ØªÙ…Ø§Ø±ÙŠÙ† Ø§Ù„ØªÙ†ÙØ³ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ù„ØªÙ‚ÙˆÙŠØ© Ø§Ù„Ø£Ø³Ø§Ø³');
            }
            if (userData.skills.clarity < 50) {
                recommendations.push('â€¢ Ù…Ø§Ø±Ø³ ØªÙ…Ø§Ø±ÙŠÙ† Ø§Ù„Ù†Ø·Ù‚ Ø§Ù„ÙˆØ§Ø¶Ø­ ÙŠÙˆÙ…ÙŠØ§Ù‹');
            }
            if (userData.skills.expression < 50) {
                recommendations.push('â€¢ ØªØ¯Ø±Ø¨ Ø¹Ù„Ù‰ ØªØºÙŠÙŠØ± Ø§Ù„Ù†Ø¨Ø±Ø© ÙˆØ§Ù„ØªÙ†ØºÙŠÙ…');
            }
            if (userData.skills.confidence < 50) {
                recommendations.push('â€¢ Ø§Ø¹Ù…Ù„ Ø¹Ù„Ù‰ Ø¨Ù†Ø§Ø¡ Ø§Ù„Ø«Ù‚Ø© Ù…Ù† Ø®Ù„Ø§Ù„ Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„ØªØ¯Ø±ÙŠØ¨');
            }
            if (userData.statistics.gamesPlayed < 5) {
                recommendations.push('â€¢ Ø¬Ø±Ø¨ Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ© Ù„ØªØ­Ø³ÙŠÙ† Ù…Ù‡Ø§Ø±Ø§ØªÙƒ');
            }
            
            if (recommendations.length === 0) {
                recommendations.push('â€¢ Ø£Ø¯Ø§Ø¤Ùƒ Ù…Ù…ØªØ§Ø²! Ø§Ø³ØªÙ…Ø± ÙÙŠ Ø§Ù„ØªØ¯Ø±ÙŠØ¨ Ø§Ù„Ù…Ù†ØªØ¸Ù… Ù„Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ Ù…Ø³ØªÙˆØ§Ùƒ');
            }
            
            return recommendations.join('\n');
        }

        function exportProgress() {
            const exportData = {
                profile: userData.profile,
                skills: userData.skills,
                statistics: userData.statistics,
                exportDate: new Date().toISOString()
            };

            const jsonData = JSON.stringify(exportData, null, 2);
            
            // Ù…Ø­Ø§ÙƒØ§Ø© ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            showNotification('ğŸ’¾ ØªÙ… ØªØµØ¯ÙŠØ± Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ø¨Ù†Ø¬Ø§Ø­', 'success');
            
            // Ø¹Ø±Ø¶ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ Ù†Ø§ÙØ°Ø© Ø¬Ø¯ÙŠØ¯Ø©
            const exportWindow = window.open('', '_blank');
            exportWindow.document.write(`
                <html>
                <head>
                    <title>Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ¯Ø±ÙŠØ¨ Ø§Ù„Ù…ØµØ¯Ø±Ø©</title>
                    <style>
                        body { font-family: monospace; padding: 20px; }
                        pre { background: #f5f5f5; padding: 15px; border-radius: 5px; }
                    </style>
                </head>
                <body>
                    <h2>Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ¯Ø±ÙŠØ¨ Ø§Ù„Ù…ØµØ¯Ø±Ø©</h2>
                    <pre>${jsonData}</pre>
                </body>
                </html>
            `);
        }

        function setTrainingGoals() {
            const currentTotal = userData.skills.breathing + userData.skills.clarity + userData.skills.expression + userData.skills.confidence;
            const targetTotal = currentTotal + 100;

            document.getElementById('personalRecommendations').innerHTML = `
                <h4>ğŸ¯ Ø£Ù‡Ø¯Ø§ÙÙƒ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©</h4>
                <p><strong>Ø§Ù„Ù‡Ø¯Ù Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ:</strong> Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ ${targetTotal} Ù†Ù‚Ø·Ø© Ø¥Ø¬Ù…Ø§Ù„ÙŠØ©</p>
                <p><strong>Ø§Ù„Ù‡Ø¯Ù Ø§Ù„ÙŠÙˆÙ…ÙŠ:</strong> Ø¥ÙƒÙ…Ø§Ù„ ØªÙ…Ø±ÙŠÙ† ÙˆØ§Ø­Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„</p>
                <p><strong>Ø§Ù„Ù‡Ø¯Ù Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ÙŠ:</strong> ØªØ­Ø³ÙŠÙ† Ù…Ù‡Ø§Ø±Ø© ÙˆØ§Ø­Ø¯Ø© Ø¨Ù€ 10 Ù†Ù‚Ø§Ø·</p>
                <p><strong>Ø§Ù„Ù‡Ø¯Ù Ø§Ù„Ø´Ù‡Ø±ÙŠ:</strong> Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØªØ§Ù„ÙŠ</p>
                <p><strong>ğŸ’¡ Ù†ØµÙŠØ­Ø©:</strong> Ø­Ø¯Ø¯ 15-20 Ø¯Ù‚ÙŠÙ‚Ø© ÙŠÙˆÙ…ÙŠØ§Ù‹ Ù„Ù„ØªØ¯Ø±ÙŠØ¨ Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø£ÙØ¶Ù„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬</p>
            `;
            showNotification('ğŸ¯ ØªÙ… ØªØ­Ø¯ÙŠØ¯ Ø£Ù‡Ø¯Ø§Ù ØªØ¯Ø±ÙŠØ¨ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø© Ù„Ùƒ', 'info');
        }

        function getPersonalizedPlan() {
            const userLevel = userData.profile.level;
            const weakestSkill = Object.keys(userData.skills).reduce((a, b) => 
                userData.skills[a] < userData.skills[b] ? a : b
            );

            let plan = '';
            if (userLevel === 'beginner') {
                plan = `
                    <h4>ğŸ“‹ Ø®Ø·Ø© Ø§Ù„Ù…Ø¨ØªØ¯Ø¦ÙŠÙ† (4 Ø£Ø³Ø§Ø¨ÙŠØ¹)</h4>
                    <p><strong>ğŸ—“ï¸ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ 1-2:</strong> ØªÙ…Ø§Ø±ÙŠÙ† Ø§Ù„ØªÙ†ÙØ³ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© (10 Ø¯Ù‚Ø§Ø¦Ù‚ ÙŠÙˆÙ…ÙŠØ§Ù‹)</p>
                    <p><strong>ğŸ—“ï¸ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ 3:</strong> Ø¥Ø¶Ø§ÙØ© ØªÙ…Ø§Ø±ÙŠÙ† Ø§Ù„Ù†Ø·Ù‚ Ø§Ù„ÙˆØ§Ø¶Ø­</p>
                    <p><strong>ğŸ—“ï¸ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ 4:</strong> ØªØ¯Ø±ÙŠØ¨ Ø¹Ù„Ù‰ Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ø¬Ù‡Ø±ÙŠØ©</p>
                `;
            } else if (userLevel === 'intermediate') {
                plan = `
                    <h4>ğŸ“‹ Ø®Ø·Ø© Ø§Ù„Ù…ØªÙˆØ³Ø·ÙŠÙ† (6 Ø£Ø³Ø§Ø¨ÙŠØ¹)</h4>
                    <p><strong>ğŸ—“ï¸ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ 1-2:</strong> ØªØ·ÙˆÙŠØ± Ø§Ù„ØªÙ†ØºÙŠÙ… ÙˆØ§Ù„Ù†Ø¨Ø±Ø©</p>
                    <p><strong>ğŸ—“ï¸ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ 3-4:</strong> ØªØ¯Ø±ÙŠØ¨ Ø¹Ù„Ù‰ Ø§Ù„Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆÙ‡Ø§Øª Ø§Ù„Ù…Ø®ØªÙ„ÙØ©</p>
                    <p><strong>ğŸ—“ï¸ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ 5-6:</strong> ØªØ·ÙˆÙŠØ± Ø§Ù„Ø­Ø¶ÙˆØ± ÙˆØ§Ù„Ø«Ù‚Ø©</p>
                `;
            } else {
                plan = `
                    <h4>ğŸ“‹ Ø®Ø·Ø© Ø§Ù„Ù…ØªÙ‚Ø¯Ù…ÙŠÙ† (8 Ø£Ø³Ø§Ø¨ÙŠØ¹)</h4>
                    <p><strong>ğŸ—“ï¸ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ 1-2:</strong> Ø¥ØªÙ‚Ø§Ù† Ø§Ù„ØªÙ‚Ù†ÙŠØ§Øª Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©</p>
                    <p><strong>ğŸ—“ï¸ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ 3-4:</strong> ØªØ·ÙˆÙŠØ± Ø§Ù„Ø£Ø³Ù„ÙˆØ¨ Ø§Ù„Ø´Ø®ØµÙŠ</p>
                    <p><strong>ğŸ—“ï¸ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ 5-6:</strong> ØªØ¯Ø±ÙŠØ¨ Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙˆØ§Ù‚Ù Ø§Ù„ØµØ¹Ø¨Ø©</p>
                    <p><strong>ğŸ—“ï¸ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ 7-8:</strong> ØµÙ‚Ù„ Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠØ©</p>
                `;
            }

            plan += `<p><strong>ğŸ¯ Ø§Ù„ØªØ±ÙƒÙŠØ² Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ:</strong> ØªØ·ÙˆÙŠØ± Ù…Ù‡Ø§Ø±Ø© ${getSkillName(weakestSkill)} (Ù†Ù‚Ø§Ø·Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠØ©: ${userData.skills[weakestSkill]})</p>`;

            document.getElementById('personalRecommendations').innerHTML = plan;
            showNotification('ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø®Ø·Ø© ØªØ¯Ø±ÙŠØ¨ÙŠØ© Ù…Ø®ØµØµØ© Ù„Ù…Ø³ØªÙˆØ§Ùƒ!', 'info');
        }

        function getSkillName(skill) {
            const names = {
                breathing: 'Ø§Ù„ØªÙ†ÙØ³ ÙˆØ§Ù„ØªØ­ÙƒÙ…',
                clarity: 'ÙˆØ¶ÙˆØ­ Ø§Ù„Ù†Ø·Ù‚',
                expression: 'Ø§Ù„ØªØ¹Ø¨ÙŠØ± ÙˆØ§Ù„ØªÙ†ØºÙŠÙ…',
                confidence: 'Ø§Ù„Ø«Ù‚Ø© ÙˆØ§Ù„Ø­Ø¶ÙˆØ±'
            };
            return names[skill] || skill;
        }

        function resetAllProgress() {
            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø¬Ù…ÙŠØ¹ Ø¨ÙŠØ§Ù†Ø§ØªÙƒØŸ Ù„Ù† ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù† Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡.')) {
                userData = {
                    profile: {
                        name: userData.profile.name,
                        level: userData.profile.level,
                        currentLevel: 1,
                        xp: 0,
                        joinDate: userData.profile.joinDate,
                        lastActiveDate: new Date().toISOString()
                    },
                    skills: {
                        breathing: 0,
                        clarity: 0,
                        expression: 0,
                        confidence: 0
                    },
                    statistics: {
                        totalSessions: 0,
                        totalMinutes: 0,
                        exercisesCompleted: 0,
                        gamesPlayed: 0,
                        currentStreak: 0,
                        bestSpeedTime: null,
                        charactersPlayed: 0,
                        totalGamePoints: 0,
                        breathingCycles: 0,
                        breathingSessionTime: 0,
                        breathingStreakDays: 0
                    },
                    achievements: [],
                    settings: {
                        soundEnabled: true,
                        notificationsEnabled: true
                    }
                };

                updateAllUI();
                saveUserData();
                showNotification('ğŸ”„ ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª', 'warning');
            }
        }

        // ÙˆØ¸Ø§Ø¦Ù Ù…Ø³Ø§Ø¹Ø¯Ø©
        function addExperiencePoints(points) {
            userData.profile.xp += points;
            userData.statistics.totalMinutes += Math.floor(points / 2);
            checkLevelUp();
        }

        function checkLevelUp() {
            const newLevel = Math.min(Math.floor(userData.profile.xp / 1000) + 1, 5);
            if (newLevel > userData.profile.currentLevel) {
                userData.profile.currentLevel = newLevel;
                userData.statistics.totalSessions += 1;
                const levelNames = ['', 'Ø§Ù„Ù…Ø¨ØªØ¯Ø¦', 'Ø§Ù„Ù…ØªÙ‚Ø¯Ù…', 'Ø§Ù„Ù…Ø­ØªØ±Ù', 'Ø§Ù„Ø®Ø¨ÙŠØ±', 'Ø§Ù„Ø£Ø³Ø·ÙˆØ±Ø©'];
                showNotification(`ğŸ‰ ØªÙ‡Ø§Ù†ÙŠÙ†Ø§! ÙˆØµÙ„Øª Ø¥Ù„Ù‰ ${levelNames[newLevel]}! Ø§Ù„Ù…Ø³ØªÙˆÙ‰ ${newLevel}`, 'success');
            }
        }

        function parseTimeString(timeString) {
            const [minutes, seconds] = timeString.split(':').map(Number);
            return minutes * 60 + seconds;
        }

        function logout() {
            if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ØŸ Ø³ÙŠØªÙ… Ø­ÙØ¸ ØªÙ‚Ø¯Ù…Ùƒ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹.')) {
                saveUserData();

                // Ø¥ÙŠÙ‚Ø§Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªÙ…Ø§Ø±ÙŠÙ† Ø§Ù„Ù†Ø´Ø·Ø©
                stopAllBreathing();
                if (currentTimer) {
                    clearInterval(currentTimer);
                    currentTimer = null;
                }

                // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
                document.getElementById('mainContent').classList.add('hidden');
                document.getElementById('loginSection').classList.remove('hidden');
                document.getElementById('userName').value = '';
                document.getElementById('userLevel').selectedIndex = 0;

                showNotification('ğŸ‘‹ ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ ÙˆØ­ÙØ¸ ØªÙ‚Ø¯Ù…Ùƒ', 'info');
            }
        }

        // ØªØ´ØºÙŠÙ„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
            document.getElementById('userName').focus();
        });

        // Ø­ÙØ¸ Ø¯ÙˆØ±ÙŠ Ù„Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        setInterval(() => {
            if (userData.profile.name) {
                saveUserData();
            }
        }, 60000); // ÙƒÙ„ Ø¯Ù‚ÙŠÙ‚Ø©

        // Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„ØªØ­Ù…ÙŠÙ„ ÙÙŠ Ø§Ù„ÙƒÙˆÙ†Ø³ÙˆÙ„
        console.log('ğŸ“ Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù… Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠØ© Ø¬Ø§Ù‡Ø²Ø© Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…!');
        console.log('ğŸ“š Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª Ù…ØªØ§Ø­Ø© Ø¨Ø¯ÙˆÙ† Ø§Ù„Ø­Ø§Ø¬Ø© Ù„Ø§ØªØµØ§Ù„ Ø¥Ù†ØªØ±Ù†Øª');
        console.log('ğŸ’¾ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­ÙÙˆØ¸Ø© Ù…Ø­Ù„ÙŠØ§Ù‹ Ù…Ø¹ Ø­ÙØ¸ Ø¯ÙˆØ±ÙŠ ÙƒÙ„ Ø¯Ù‚ÙŠÙ‚Ø©');
        console.log('ğŸ¯ Ø§Ù„Ù†Ø¸Ø§Ù… ÙŠØ¯Ø¹Ù…: Ø§Ù„ØªØ¯Ø±ÙŠØ¨ Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØŒ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ØŒ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±ØŒ ÙˆØ§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª');
    </script>
</body>
</html>