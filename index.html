<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🎙️ أكاديمية الإعلام الاحترافية</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 20px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .header h1 {
            color: #4a5568;
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            color: #718096;
            font-size: 1.1em;
        }

        .login-section {
            background: rgba(255, 255, 255, 0.95);
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            text-align: center;
            max-width: 500px;
            margin: 0 auto;
        }

        .input-group {
            margin-bottom: 20px;
            text-align: right;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #4a5568;
        }

        .input-group input,
        .input-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        .input-group input:focus,
        .input-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px;
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .main-content {
            display: none;
        }

        .tabs {
            display: flex;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 10px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            border-radius: 10px;
            transition: background 0.3s;
            font-weight: bold;
        }

        .tab.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .content {
            display: none;
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .content.active {
            display: block;
        }

        .user-info {
            background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
            text-align: center;
        }

        .skill-bar {
            margin-bottom: 20px;
        }

        .skill-name {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-weight: bold;
        }

        .progress-bar {
            background: #e2e8f0;
            height: 20px;
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #48bb78 0%, #38a169 100%);
            border-radius: 10px;
            transition: width 0.3s;
        }

        .breathing-circle {
            width: 200px;
            height: 200px;
            border: 5px solid #667eea;
            border-radius: 50%;
            margin: 30px auto;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: bold;
            transition: transform 4s ease-in-out;
            cursor: pointer;
        }

        .breathing-circle.inhale {
            transform: scale(1.3);
            background: rgba(102, 126, 234, 0.1);
        }

        .breathing-circle.exhale {
            transform: scale(0.8);
            background: rgba(118, 75, 162, 0.1);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .stat-card {
            background: linear-gradient(135deg, #4299e1 0%, #3182ce 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
        }

        .stat-number {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 10px;
            color: white;
            font-weight: bold;
            z-index: 1000;
            transform: translateX(400px);
            transition: transform 0.3s;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success {
            background: #48bb78;
        }

        .notification.error {
            background: #f56565;
        }

        .notification.warning {
            background: #ed8936;
        }

        .notification.info {
            background: #4299e1;
        }

        .scenario-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .scenario-card {
            background: linear-gradient(135deg, #ed64a6 0%, #d53f8c 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            cursor: pointer;
            transition: transform 0.3s;
            text-align: center;
        }

        .scenario-card:hover {
            transform: translateY(-5px);
        }

        .scenario-card.selected {
            border: 3px solid #ffd700;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
        }

        .game-area {
            background: rgba(102, 126, 234, 0.1);
            padding: 30px;
            border-radius: 15px;
            margin: 20px 0;
            text-align: center;
        }

        .timer-display {
            font-size: 2em;
            font-weight: bold;
            color: #667eea;
            margin: 20px 0;
        }

        .hidden {
            display: none !important;
        }

        @media (max-width: 768px) {
            .tabs {
                flex-direction: column;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .breathing-circle {
                width: 150px;
                height: 150px;
                font-size: 18px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- رأس الصفحة -->
        <div class="header">
            <h1>🎙️ أكاديمية الإعلام الاحترافية</h1>
            <p>منصة التدريب الصوتي والإلقاء المحترف بتقنيات الذكاء الاصطناعي</p>
        </div>

        <!-- قسم تسجيل الدخول -->
        <div id="loginSection" class="login-section">
            <h2>🚀 ابدأ رحلتك التدريبية</h2>
            <div class="input-group">
                <label>اسم المتدرب:</label>
                <input type="text" id="userName" placeholder="أدخل اسمك الكامل">
            </div>
            <div class="input-group">
                <label>مستوى الخبرة:</label>
                <select id="userLevel">
                    <option value="beginner">مبتدئ - أول مرة في التدريب الصوتي</option>
                    <option value="intermediate">متوسط - لدي خبرة أساسية</option>
                    <option value="advanced">متقدم - خبرة جيدة أبحث عن التطوير</option>
                </select>
            </div>
            <button class="btn" onclick="startTraining()">🎯 بدء التدريب</button>
            <button class="btn" onclick="loadExistingUser()">📂 تحميل بيانات موجودة</button>
            <button class="btn" onclick="showDemo()">👁️ عرض توضيحي</button>
        </div>

        <!-- المحتوى الرئيسي -->
        <div id="mainContent" class="main-content">
            <!-- معلومات المستخدم -->
            <div class="user-info">
                <h2 id="levelDisplay">المتدرب - المبتدئ (المستوى 1)</h2>
                <p>نقاط الخبرة: <span id="xpDisplay">0</span> | المستوى: <span id="levelNumber">1</span></p>
            </div>

            <!-- التبويبات -->
            <div class="tabs">
                <div class="tab active" data-target="dashboard" onclick="switchTab('dashboard', this)">🏠 الرئيسية</div>
                <div class="tab" data-target="breathing" onclick="switchTab('breathing', this)">🧘 تمارين التنفس</div>
                <div class="tab" data-target="studio" onclick="switchTab('studio', this)">🎬 الاستوديو الافتراضي</div>
                <div class="tab" data-target="games" onclick="switchTab('games', this)">🎮 الألعاب التفاعلية</div>
                <div class="tab" data-target="progress" onclick="switchTab('progress', this)">📊 تقرير التقدم</div>
            </div>

            <!-- محتوى الرئيسية -->
            <div id="dashboard" class="content active">
                <h3>📊 مهاراتك الصوتية</h3>
                <div class="skill-bar">
                    <div class="skill-name">
                        <span>التنفس والتحكم</span>
                        <span id="breathingPercent">0%</span>
                    </div>
                    <div class="progress-bar">
                        <div id="breathingBar" class="progress-fill" style="width: 0%"></div>
                    </div>
                </div>
                <div class="skill-bar">
                    <div class="skill-name">
                        <span>وضوح النطق</span>
                        <span id="clarityPercent">0%</span>
                    </div>
                    <div class="progress-bar">
                        <div id="clarityBar" class="progress-fill" style="width: 0%"></div>
                    </div>
                </div>
                <div class="skill-bar">
                    <div class="skill-name">
                        <span>التعبير والتنغيم</span>
                        <span id="expressionPercent">0%</span>
                    </div>
                    <div class="progress-bar">
                        <div id="expressionBar" class="progress-fill" style="width: 0%"></div>
                    </div>
                </div>
                <div class="skill-bar">
                    <div class="skill-name">
                        <span>الثقة والحضور</span>
                        <span id="confidencePercent">0%</span>
                    </div>
                    <div class="progress-bar">
                        <div id="confidenceBar" class="progress-fill" style="width: 0%"></div>
                    </div>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number" id="exercisesCompleted">0</div>
                        <div>تمارين مكتملة</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="trainingMinutes">0</div>
                        <div>دقائق التدريب</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="currentStreak">0</div>
                        <div>أيام متتالية</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="gamesPlayedCount">0</div>
                        <div>ألعاب مكتملة</div>
                    </div>
                </div>

                <div id="aiAdvice" style="margin-top: 30px; padding: 20px; background: rgba(102, 126, 234, 0.1); border-radius: 15px;">
                    <h4>💡 المدرب الذكي</h4>
                    <p>مرحباً بك في أكاديمية الإعلام الاحترافية! ابدأ بتمارين التنفس لبناء أساس قوي.</p>
                </div>

                <div style="text-align: center; margin-top: 20px;">
                    <button class="btn" onclick="getSmartAdvice()">💡 نصيحة ذكية</button>
                    <button class="btn" onclick="getDailyChallenge()">🎯 تحدي اليوم</button>
                    <button class="btn" onclick="startQuickAssessment()">⚡ تقييم سريع</button>
                </div>

                <div id="assessmentResults" class="hidden" style="margin-top: 20px; padding: 20px; background: rgba(72, 187, 120, 0.1); border-radius: 15px;">
                    <h4>📊 نتائج التقييم السريع</h4>
                    <p>الدرجة الإجمالية: <span id="overallScore">0</span>/100</p>
                    <p>وضوح النطق: <span id="clarityScore">0</span>/100</p>
                    <p>الثقة: <span id="confidenceScore">0</span>/100</p>
                    <p>التعبير: <span id="expressionScore">0</span>/100</p>
                </div>
            </div>

            <!-- تمارين التنفس -->
            <div id="breathing" class="content">
                <h3>🧘 تمارين التنفس</h3>
                <p>تمارين التنفس هي الأساس لأي أداء صوتي متميز. تعلم تقنيات التنفس الصحيح للحصول على صوت قوي وثابت.</p>
                
                <div id="breathingCircle" class="breathing-circle" onclick="startBreathingExercise()">
                    <span id="breathingText">اضغط لبدء التمرين</span>
                </div>
                
                <div class="timer-display" id="breathingTimer">00:00</div>
                <p style="text-align: center;">مدة التمرين</p>

                <div style="text-align: center; margin: 30px 0;">
                    <button class="btn" onclick="startBasicBreathing()">🌸 تنفس أساسي (4-4-4)</button>
                    <button class="btn" onclick="startAdvancedBreathing()">💪 تنفس متقدم (4-7-8)</button>
                    <button class="btn" onclick="startGuidedBreathing()">🎯 تنفس موجه</button>
                    <button class="btn" id="stopBreathingBtn" onclick="stopAllBreathing()" disabled>⏹️ إيقاف التمرين</button>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number" id="breathingCycles">0</div>
                        <div>دورات مكتملة</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="breathingSessionTime">0</div>
                        <div>دقائق الجلسة</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="breathingStreakDays">0</div>
                        <div>أيام متتالية</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="breathingLevel">مبتدئ</div>
                        <div>مستوى التنفس</div>
                    </div>
                </div>
            </div>

            <!-- الاستوديو الافتراضي -->
            <div id="studio" class="content">
                <h3>🎬 الاستوديو الافتراضي</h3>
                <p>تدرب على سيناريوهات واقعية في بيئة افتراضية آمنة.</p>

                <div class="scenario-cards">
                    <div class="scenario-card" onclick="selectScenario('news')">
                        <h4>📺 نشرة الأخبار</h4>
                        <p>تدرب على قراءة الأخبار بطريقة احترافية</p>
                    </div>
                    <div class="scenario-card" onclick="selectScenario('interview')">
                        <h4>🎤 المقابلة الإذاعية</h4>
                        <p>أجر مقابلات إذاعية وتلفزيونية</p>
                    </div>
                    <div class="scenario-card" onclick="selectScenario('commercial')">
                        <h4>📢 الإعلان التجاري</h4>
                        <p>أداء الإعلانات بطريقة مقنعة</p>
                    </div>
                    <div class="scenario-card" onclick="selectScenario('presentation')">
                        <h4>👔 العرض التقديمي</h4>
                        <p>تقديم العروض بثقة واحترافية</p>
                    </div>
                </div>

                <div id="scenarioContent" class="hidden" style="background: rgba(102, 126, 234, 0.1); padding: 20px; border-radius: 15px; margin: 20px 0;">
                    <h4 id="scenarioTitle"></h4>
                    <p id="scenarioScript" style="margin: 15px 0; font-style: italic;"></p>
                    <p id="scenarioTips" style="color: #666;"></p>
                </div>

                <div style="text-align: center;">
                    <button class="btn" id="studioStartBtn" onclick="startStudioSession()" disabled>🎬 بدء التسجيل</button>
                    <button class="btn" onclick="getPerformanceTips()">💡 نصائح الأداء</button>
                    <button class="btn" onclick="switchScenario()">🔄 تغيير السيناريو</button>
                </div>

                <div class="timer-display" id="studioTimer">00:00</div>
            </div>

            <!-- الألعاب التفاعلية -->
            <div id="games" class="content">
                <h3>🎮 الألعاب التفاعلية</h3>
                <p>تعلم من خلال اللعب والتحديات الممتعة.</p>

                <!-- تحدي السرعة -->
                <div class="game-area">
                    <h4>⚡ تحدي السرعة</h4>
                    <p id="speedChallengeText">انقر على "بدء التحدي" للحصول على نص التدريب.</p>
                    <div class="timer-display" id="speedTimer">00:00</div>
                    <button class="btn" onclick="startSpeedChallenge()">🏃‍♂️ بدء التحدي</button>
                    <button class="btn" id="speedCompleteBtn" onclick="completeSpeedChallenge()" disabled>✅ إكمال</button>
                    <button class="btn" onclick="resetSpeedChallenge()">🔄 إعادة تعيين</button>
                    <p>أفضل وقت: <span id="bestSpeedTime">--:--</span></p>
                </div>

                <!-- شخصيات مختلفة -->
                <div class="game-area">
                    <h4>🎭 شخصيات مختلفة</h4>
                    <div style="display: flex; justify-content: center; gap: 10px; margin: 20px 0;">
                        <button class="btn" onclick="selectCharacter('narrator')">📖 راوي</button>
                        <button class="btn" onclick="selectCharacter('anchor')">📺 مذيع</button>
                        <button class="btn" onclick="selectCharacter('commercial')">📢 إعلان</button>
                        <button class="btn" onclick="selectCharacter('children')">🧸 أطفال</button>
                    </div>
                    <div id="characterDisplay" style="text-align: center; padding: 20px; background: rgba(237, 100, 166, 0.1); border-radius: 10px;">
                        اختر شخصية لتبدأ التمرين
                    </div>
                    <p style="text-align: center; margin-top: 10px;">شخصيات مُؤداة: <span id="charactersPlayed">0</span></p>
                </div>

                <!-- تحدي النطق -->
                <div class="game-area">
                    <h4>🔤 تحدي النطق</h4>
                    <button class="btn" onclick="startPronunciationChallenge()">🎯 بدء التحدي</button>
                    <div id="pronunciationChallenge" style="text-align: center; padding: 20px; margin: 20px 0; background: rgba(72, 187, 120, 0.1); border-radius: 10px;">
                        اضغط "بدء التحدي" لبدء تحدي النطق
                    </div>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number" id="totalGamePoints">0</div>
                        <div>نقاط الألعاب</div>
                    </div>
                </div>
            </div>

            <!-- تقرير التقدم -->
            <div id="progress" class="content">
                <h3>📊 تقرير التقدم</h3>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number" id="totalTrainingSessions">0</div>
                        <div>جلسات التدريب</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="totalTrainingHours">0</div>
                        <div>ساعات التدريب</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="completionRate">0%</div>
                        <div>معدل الإكمال</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="averagePerformance">0</div>
                        <div>متوسط الأداء</div>
                    </div>
                </div>

                <div id="personalRecommendations" style="margin: 30px 0; padding: 20px; background: rgba(102, 126, 234, 0.1); border-radius: 15px;">
                    <h4>💡 التوصيات الشخصية</h4>
                    <p>ابدأ بالتدريب لتحصل على توصيات مخصصة لك!</p>
                </div>

                <div style="text-align: center; margin-top: 30px;">
                    <button class="btn" onclick="generateDetailedReport()">📋 تقرير مفصل</button>
                    <button class="btn" onclick="exportProgress()">💾 تصدير البيانات</button>
                    <button class="btn" onclick="setTrainingGoals()">🎯 تحديد الأهداف</button>
                    <button class="btn" onclick="getPersonalizedPlan()">📅 خطة مخصصة</button>
                    <button class="btn" onclick="resetAllProgress()" style="background: #f56565;">🔄 إعادة تعيين</button>
                </div>
            </div>

            <!-- زر تسجيل الخروج -->
            <div style="text-align: center; margin-top: 30px;">
                <button class="btn" onclick="logout()">🚪 تسجيل خروج وحفظ التقدم</button>
            </div>
        </div>
    </div>

    <!-- الإشعارات -->
    <div id="notification" class="notification"></div>

    <script>
        // بيانات المستخدم
        let userData = {
            profile: {
                name: '',
                level: 'beginner',
                currentLevel: 1,
                xp: 0,
                joinDate: '',
                lastActiveDate: ''
            },
            skills: {
                breathing: 0,
                clarity: 0,
                expression: 0,
                confidence: 0
            },
            statistics: {
                totalSessions: 0,
                totalMinutes: 0,
                exercisesCompleted: 0,
                gamesPlayed: 0,
                currentStreak: 0,
                bestSpeedTime: null,
                charactersPlayed: 0,
                totalGamePoints: 0,
                breathingCycles: 0,
                breathingSessionTime: 0,
                breathingStreakDays: 0
            },
            achievements: [],
            settings: {
                soundEnabled: true,
                notificationsEnabled: true
            }
        };

        // متغيرات التطبيق
        let currentTimer = null;
        let breathingInterval = null;
        let isTrainingActive = false;
        let currentExercise = '';
        let selectedScenario = null;
        let gameStartTime = null;
        let currentCharacter = null;
        let currentWordIndex = 0;

        // بيانات التدريب
        const scenarios = {
            news: {
                title: 'نشرة الأخبار',
                script: 'مساء الخير، أنا [اسمك] وأرحب بكم في نشرة أخبار الساعة الثامنة. في الأخبار الرئيسية اليوم...',
                tips: 'حافظ على نبرة جدية ومهنية، انظر مباشرة للكاميرا، اقرأ بوضوح ووتيرة مناسبة'
            },
            interview: {
                title: 'المقابلة الإذاعية',
                script: 'مرحباً بكم في برنامج [اسم البرنامج]، أنا [اسمك] ومعي اليوم ضيف مميز...',
                tips: 'كن ودوداً ومهتماً، استخدم نبرة دافئة، اطرح أسئلة واضحة'
            },
            commercial: {
                title: 'الإعلان التجاري',
                script: 'هل تبحث عن [المنتج]؟ لدينا الحل المثالي لك! منتجنا الجديد يوفر لك...',
                tips: 'كن متحمساً ومقنعاً، استخدم نبرة إيجابية، أكد على الفوائد'
            },
            presentation: {
                title: 'العرض التقديمي',
                script: 'السيدات والسادة، أرحب بكم في عرضنا اليوم حول [الموضوع]. سنستعرض معاً...',
                tips: 'تحدث بثقة ووضوح، استخدم إيماءات مناسبة، تفاعل مع الجمهور'
            }
        };

        const characters = {
            narrator: {
                name: 'الراوي',
                text: 'في قديم الزمان، كان هناك مملكة بعيدة تحكمها ملكة حكيمة...',
                tips: 'استخدم صوتاً هادئاً وغامضاً، غيّر النبرة حسب الأحداث'
            },
            anchor: {
                name: 'المذيع',
                text: 'أهلاً ومرحباً بكم في برنامجنا المسائي، أنا مذيعكم وأسعد أوقاتكم معاً',
                tips: 'كن واضحاً ومهنياً، استخدم نبرة ودية ومريحة'
            },
            commercial: {
                name: 'الإعلان',
                text: 'المنتج الثوري الجديد! احصل عليه الآن بخصم 50%، عرض محدود!',
                tips: 'كن متحمساً ومقنعاً، أكد على الكلمات المهمة'
            },
            children: {
                name: 'أطفال',
                text: 'مرحباً أصدقائي الصغار! هل أنتم مستعدون للمغامرة الجديدة؟',
                tips: 'استخدم صوتاً مرحاً وطفولياً، كن متحمساً وودوداً'
            }
        };

        const speedTexts = [
            'التدريب المستمر على مهارات الإلقاء يساعد في تطوير الثقة والحضور المسرحي',
            'الإعلام المعاصر يتطلب مهارات متقدمة في التواصل والتعبير الواضح',
            'تقنيات التنفس السليم هي الأساس لأي أداء صوتي متميز ومؤثر',
            'النجاح في مجال الإعلام يحتاج إلى تدريب دائم وتطوير مستمر للمهارات'
        ];

        const pronunciationWords = [
            'استراتيجية', 'الديمقراطية', 'التكنولوجيا', 'الاقتصاد', 'المسؤولية',
            'الاستثمار', 'التطوير', 'الابتكار', 'المؤسسة', 'الشراكة'
        ];

        const smartAdvices = [
            'تذكر أن التنفس العميق قبل البدء يساعد في تهدئة الأعصاب وتحسين الأداء',
            'مارس القراءة الجهرية يومياً لمدة 10 دقائق لتحسين وضوح النطق',
            'سجل صوتك واستمع إليه لتحديد نقاط القوة والضعف في أدائك',
            'تدرب أمام المرآة لتحسين تعابير الوجه والإيماءات',
            'اشرب الماء بانتظام للحفاظ على ترطيب الحبال الصوتية'
        ];

        // وظائف التطبيق الأساسية
        function initializeApp() {
            setupEventListeners();
            loadUserData();
        }

        function setupEventListeners() {
            document.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    const target = this.getAttribute('data-target');
                    switchTab(target, this);
                });
            });

            window.addEventListener('beforeunload', saveUserData);
            setInterval(saveUserData, 30000);

            document.getElementById('userName').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    startTraining();
                }
            });
        }

        function switchTab(targetId, tabElement) {
            document.querySelectorAll('.content').forEach(content => {
                content.classList.remove('active');
            });

            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });

            const targetContent = document.getElementById(targetId);
            if (targetContent) {
                targetContent.classList.add('active');
                tabElement.classList.add('active');
            }
        }

        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = `notification ${type} show`;
            setTimeout(() => {
                notification.classList.remove('show');
            }, 4000);
        }

        function saveUserData() {
            if (userData.profile.name) {
                userData.profile.lastActiveDate = new Date().toISOString();
                const dataStr = JSON.stringify(userData);
                // محاكاة حفظ البيانات (في التطبيق الحقيقي ستحفظ في localStorage)
                console.log('تم حفظ البيانات:', dataStr.length, 'حرف');
            }
        }

        function loadUserData() {
            // محاكاة تحميل البيانات المحفوظة
            console.log('تم تحميل البيانات المحفوظة');
        }

        // وظائف تسجيل الدخول
        function startTraining() {
            const userName = document.getElementById('userName').value.trim();
            const userLevel = document.getElementById('userLevel').value;

            if (!userName) {
                showNotification('يرجى إدخال اسمك كاملاً', 'error');
                return;
            }

            if (userName.length < 3) {
                showNotification('الاسم يجب أن يكون 3 أحرف على الأقل', 'error');
                return;
            }

            userData.profile.name = userName;
            userData.profile.level = userLevel;
            userData.profile.joinDate = new Date().toISOString();

            showMainInterface();
            showNotification(`🎉 مرحباً ${userName}! بدأت رحلتك التدريبية`, 'success');
        }

        function loadExistingUser() {
            // محاكاة تحميل مستخدم موجود
            userData.profile.name = 'أحمد محمد';
            userData.profile.level = 'intermediate';
            userData.profile.xp = 1250;
            userData.skills.breathing = 45;
            userData.skills.clarity = 60;
            userData.skills.expression = 35;
            userData.skills.confidence = 50;
            userData.statistics.exercisesCompleted = 15;
            userData.statistics.totalMinutes = 120;
            userData.statistics.gamesPlayed = 8;

            document.getElementById('userName').value = userData.profile.name;
            showMainInterface();
            showNotification(`🎉 مرحباً مرة أخرى ${userData.profile.name}!`, 'success');
        }

        function showDemo() {
            showNotification('🎬 العرض التوضيحي متاح قريباً!', 'info');
        }

        function showMainInterface() {
            document.getElementById('loginSection').classList.add('hidden');
            document.getElementById('mainContent').classList.remove('hidden');
            updateAllUI();
        }

        function updateAllUI() {
            updateProgressDisplay();
            updateSkillBars();
            updateStatistics();
        }

        function updateProgressDisplay() {
            const levelNames = ['المبتدئ', 'المتقدم', 'المحترف', 'الخبير', 'الأسطورة'];
            const currentLevel = Math.min(Math.floor(userData.profile.xp / 1000) + 1, 5);
            userData.profile.currentLevel = currentLevel;

            document.getElementById('levelDisplay').textContent = 
                `${userData.profile.name} - ${levelNames[currentLevel - 1]} (المستوى ${currentLevel})`;
            document.getElementById('xpDisplay').textContent = userData.profile.xp;
            document.getElementById('levelNumber').textContent = currentLevel;
        }

        function updateSkillBars() {
            updateSkillBar('breathing', userData.skills.breathing);
            updateSkillBar('clarity', userData.skills.clarity);
            updateSkillBar('expression', userData.skills.expression);
            updateSkillBar('confidence', userData.skills.confidence);
        }

        function updateSkillBar(skill, points) {
            const percentage = Math.min((points / 100) * 100, 100);
            document.getElementById(`${skill}Percent`).textContent = `${Math.round(percentage)}%`;
            document.getElementById(`${skill}Bar`).style.width = `${percentage}%`;
        }

        function updateStatistics() {
            document.getElementById('exercisesCompleted').textContent = userData.statistics.exercisesCompleted;
            document.getElementById('trainingMinutes').textContent = userData.statistics.totalMinutes;
            document.getElementById('currentStreak').textContent = userData.statistics.currentStreak;
            document.getElementById('gamesPlayedCount').textContent = userData.statistics.gamesPlayed;
            document.getElementById('totalGamePoints').textContent = userData.statistics.totalGamePoints;
            document.getElementById('breathingCycles').textContent = userData.statistics.breathingCycles;
            document.getElementById('breathingSessionTime').textContent = userData.statistics.breathingSessionTime;
            document.getElementById('breathingStreakDays').textContent = userData.statistics.breathingStreakDays;

            const breathingLevel = userData.skills.breathing < 25 ? 'مبتدئ' : 
                                 userData.skills.breathing < 50 ? 'متوسط' : 
                                 userData.skills.breathing < 75 ? 'متقدم' : 'خبير';
            document.getElementById('breathingLevel').textContent = breathingLevel;

            if (userData.statistics.bestSpeedTime) {
                document.getElementById('bestSpeedTime').textContent = userData.statistics.bestSpeedTime;
            }

            document.getElementById('charactersPlayed').textContent = userData.statistics.charactersPlayed;
            document.getElementById('totalTrainingSessions').textContent = userData.statistics.totalSessions;
            document.getElementById('totalTrainingHours').textContent = Math.round(userData.statistics.totalMinutes / 60);

            const totalExercises = userData.statistics.exercisesCompleted + userData.statistics.gamesPlayed;
            const completionRate = totalExercises > 0 ? Math.round((userData.statistics.exercisesCompleted / totalExercises) * 100) : 0;
            document.getElementById('completionRate').textContent = `${completionRate}%`;

            const avgPerformance = Math.round((userData.skills.breathing + userData.skills.clarity + userData.skills.expression + userData.skills.confidence) / 4);
            document.getElementById('averagePerformance').textContent = avgPerformance;
        }

        // وظائف المدرب الذكي
        function getSmartAdvice() {
            const randomAdvice = smartAdvices[Math.floor(Math.random() * smartAdvices.length)];
            document.getElementById('aiAdvice').innerHTML = `
                <h4>💡 نصيحة ذكية مخصصة لك</h4>
                <p>${randomAdvice}</p>
                <p><strong>🎯 خطوة عملية:</strong> جرب تطبيق هذه النصيحة لمدة 5 دقائق الآن واشعر بالفرق!</p>
            `;
            addExperiencePoints(5);
            showNotification('تم إنشاء نصيحة ذكية مخصصة لك!', 'info');
        }

        function getDailyChallenge() {
            const challenges = [
                "🎯 تحدي اليوم: اقرأ نص إخباري لمدة 3 دقائق بوضوح",
                "🎭 تحدي اليوم: مارس أصوات 3 شخصيات مختلفة",
                "🧘 تحدي اليوم: تمرين تنفس عميق لمدة 5 دقائق",
                "🗣️ تحدي اليوم: انطق 20 كلمة صعبة بوضوح",
                "🎵 تحدي اليوم: غيّر نبرة صوتك 5 مرات في جملة واحدة"
            ];
            const randomChallenge = challenges[Math.floor(Math.random() * challenges.length)];
            document.getElementById('aiAdvice').innerHTML = `
                <h4>🎯 تحدي اليوم الخاص بك</h4>
                <p>${randomChallenge}</p>
                <p><strong>🏆 مكافأة الإكمال:</strong> +20 نقطة خبرة عند إنجاز التحدي!</p>
            `;
            showNotification('تم إنشاء تحدي يومي جديد لك!', 'warning');
        }

        function startQuickAssessment() {
            const scores = {
                overall: Math.floor(Math.random() * 30) + 70,
                clarity: Math.floor(Math.random() * 30) + 60,
                confidence: Math.floor(Math.random() * 40) + 60,
                expression: Math.floor(Math.random() * 35) + 65
            };

            document.getElementById('overallScore').textContent = scores.overall;
            document.getElementById('clarityScore').textContent = scores.clarity;
            document.getElementById('confidenceScore').textContent = scores.confidence;
            document.getElementById('expressionScore').textContent = scores.expression;
            document.getElementById('assessmentResults').classList.remove('hidden');

            addExperiencePoints(10);
            userData.statistics.exercisesCompleted += 1;
            updateAllUI();
            showNotification('تم إكمال التقييم السريع! راجع نتائجك', 'success');
        }

        // وظائف تمارين التنفس
        function startBreathingExercise() {
            if (!isTrainingActive) {
                startBasicBreathing();
            }
        }

        function startBasicBreathing() {
            startBreathingPattern(4, 4, 4, 'تنفس أساسي');
        }

        function startAdvancedBreathing() {
            startBreathingPattern(4, 7, 8, 'تنفس متقدم');
        }

        function startGuidedBreathing() {
            startBreathingPattern(6, 4, 6, 'تنفس موجه');
        }

        function startBreathingPattern(inhale, hold, exhale, name) {
            if (isTrainingActive) {
                stopAllBreathing();
                return;
            }

            isTrainingActive = true;
            currentExercise = name;
            document.getElementById('stopBreathingBtn').disabled = false;
            document.getElementById('breathingText').textContent = 'استعد...';

            let phase = 'ready';
            let counter = 3;
            let cycles = 0;
            const circle = document.getElementById('breathingCircle');

            breathingInterval = setInterval(() => {
                switch(phase) {
                    case 'ready':
                        document.getElementById('breathingText').textContent = `${counter}`;
                        counter--;
                        if (counter < 0) {
                            phase = 'inhale';
                            counter = inhale;
                            circle.classList.add('inhale');
                        }
                        break;

                    case 'inhale':
                        document.getElementById('breathingText').textContent = `شهيق ${counter}`;
                        counter--;
                        if (counter < 0) {
                            phase = 'hold';
                            counter = hold;
                            circle.classList.remove('inhale');
                        }
                        break;

                    case 'hold':
                        document.getElementById('breathingText').textContent = `احبس ${counter}`;
                        counter--;
                        if (counter < 0) {
                            phase = 'exhale';
                            counter = exhale;
                            circle.classList.add('exhale');
                        }
                        break;

                    case 'exhale':
                        document.getElementById('breathingText').textContent = `زفير ${counter}`;
                        counter--;
                        if (counter < 0) {
                            cycles++;
                            userData.statistics.breathingCycles++;
                            document.getElementById('breathingCycles').textContent = userData.statistics.breathingCycles;
                            phase = 'inhale';
                            counter = inhale;
                            circle.classList.remove('exhale');
                            circle.classList.add('inhale');

                            if (cycles >= 5) {
                                completeBreathingSession();
                            }
                        }
                        break;
                }
            }, 1000);

            const startTime = Date.now();
            currentTimer = setInterval(() => {
                const elapsed = Math.floor((Date.now() - startTime) / 1000);
                const minutes = Math.floor(elapsed / 60);
                const seconds = elapsed % 60;
                document.getElementById('breathingTimer').textContent = 
                    `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }, 1000);

            showNotification(`بدء تمرين ${name} - 5 دورات`, 'info');
        }

        function stopAllBreathing() {
            if (breathingInterval) {
                clearInterval(breathingInterval);
                breathingInterval = null;
            }
            if (currentTimer) {
                clearInterval(currentTimer);
                currentTimer = null;
            }

            isTrainingActive = false;
            const circle = document.getElementById('breathingCircle');
            circle.classList.remove('inhale', 'exhale');
            document.getElementById('breathingText').textContent = 'اضغط لبدء التمرين';
            document.getElementById('stopBreathingBtn').disabled = true;
            showNotification('تم إيقاف تمرين التنفس', 'warning');
        }

        function completeBreathingSession() {
            stopAllBreathing();
            userData.skills.breathing += 5;
            userData.statistics.exercisesCompleted += 1;
            userData.statistics.breathingSessionTime += 1;
            addExperiencePoints(15);
            updateAllUI();
            showNotification(`🎉 ممتاز! أكملت تمرين ${currentExercise}. +15 نقطة خبرة`, 'success');
        }

        // وظائف الاستوديو الافتراضي
        function selectScenario(scenarioType) {
            selectedScenario = scenarioType;
            const scenario = scenarios[scenarioType];

            document.querySelectorAll('.scenario-card').forEach(card => {
                card.classList.remove('selected');
            });

            event.target.closest('.scenario-card').classList.add('selected');

            document.getElementById('scenarioTitle').textContent = scenario.title;
            document.getElementById('scenarioScript').textContent = scenario.script;
            document.getElementById('scenarioTips').textContent = scenario.tips;
            document.getElementById('scenarioContent').classList.remove('hidden');
            document.getElementById('studioStartBtn').disabled = false;

            showNotification(`تم اختيار سيناريو: ${scenario.title}`, 'info');
        }

        function startStudioSession() {
            if (!selectedScenario) {
                showNotification('يرجى اختيار سيناريو أولاً', 'error');
                return;
            }

            const startTime = Date.now();
            currentTimer = setInterval(() => {
                const elapsed = Math.floor((Date.now() - startTime) / 1000);
                const minutes = Math.floor(elapsed / 60);
                const seconds = elapsed % 60;
                document.getElementById('studioTimer').textContent = 
                    `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }, 1000);

            setTimeout(() => {
                completeStudioSession();
            }, 30000);

            showNotification('🎬 بدأت جلسة التسجيل! اقرأ النص بصوت واضح', 'info');
        }

        function completeStudioSession() {
            if (currentTimer) {
                clearInterval(currentTimer);
                currentTimer = null;
            }

            userData.skills.expression += 8;
            userData.skills.confidence += 6;
            userData.statistics.exercisesCompleted += 1;
            addExperiencePoints(20);
            updateAllUI();
            showNotification('🎉 ممتاز! أكملت جلسة الاستوديو. +20 نقطة خبرة', 'success');
        }

        function getPerformanceTips() {
            const tips = [
                "🎯 حافظ على التواصل البصري مع الكاميرا",
                "🗣️ استخدم إيماءات طبيعية لتعزيز رسالتك",
                "🎵 غيّر في نبرة صوتك لتجنب الملل",
                "💪 اجلس أو قف بثقة واستقامة",
                "🧘 تنفس بعمق قبل البدء لتهدئة الأعصاب"
            ];
            const randomTip = tips[Math.floor(Math.random() * tips.length)];
            showNotification(randomTip, 'info');
        }

        function switchScenario() {
            selectedScenario = null;
            document.getElementById('scenarioContent').classList.add('hidden');
            document.getElementById('studioStartBtn').disabled = true;
            document.querySelectorAll('.scenario-card').forEach(card => {
                card.classList.remove('selected');
            });
            showNotification('اختر سيناريو جديد للتدريب', 'info');
        }

        // وظائف الألعاب التفاعلية
        function startSpeedChallenge() {
            const randomText = speedTexts[Math.floor(Math.random() * speedTexts.length)];
            document.getElementById('speedChallengeText').textContent = randomText;
            gameStartTime = Date.now();
            document.getElementById('speedCompleteBtn').disabled = false;

            currentTimer = setInterval(() => {
                const elapsed = Math.floor((Date.now() - gameStartTime) / 1000);
                const minutes = Math.floor(elapsed / 60);
                const seconds = elapsed % 60;
                document.getElementById('speedTimer').textContent = 
                    `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }, 1000);

            showNotification('🏃‍♂️ بدأ تحدي السرعة! اقرأ النص بأسرع وأوضح ما يمكن', 'warning');
        }

        function completeSpeedChallenge() {
            if (!gameStartTime) return;

            const elapsed = Math.floor((Date.now() - gameStartTime) / 1000);
            const minutes = Math.floor(elapsed / 60);
            const seconds = elapsed % 60;
            const timeString = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;

            if (currentTimer) {
                clearInterval(currentTimer);
                currentTimer = null;
            }

            if (!userData.statistics.bestSpeedTime || elapsed < parseTimeString(userData.statistics.bestSpeedTime)) {
                userData.statistics.bestSpeedTime = timeString;
                showNotification('🏆 رقم قياسي جديد!', 'success');
            }

            userData.skills.clarity += 7;
            userData.statistics.gamesPlayed += 1;
            userData.statistics.totalGamePoints += Math.max(100 - elapsed, 10);
            addExperiencePoints(12);
            document.getElementById('speedCompleteBtn').disabled = true;
            gameStartTime = null;
            updateAllUI();

            showNotification(`⚡ ممتاز! أكملت التحدي في ${timeString}. +12 نقطة خبرة`, 'success');
        }

        function resetSpeedChallenge() {
            if (currentTimer) {
                clearInterval(currentTimer);
                currentTimer = null;
            }
            gameStartTime = null;
            document.getElementById('speedTimer').textContent = '00:00';
            document.getElementById('speedCompleteBtn').disabled = true;
            document.getElementById('speedChallengeText').textContent = 'انقر على "بدء التحدي" للحصول على نص التدريب.';
            showNotification('تم إعادة تعيين التحدي', 'info');
        }

        function selectCharacter(characterType) {
            currentCharacter = characterType;
            const character = characters[characterType];

            document.getElementById('characterDisplay').innerHTML = `
                <h4>🎭 ${character.name}</h4>
                <p style="font-style: italic; margin: 15px 0;">"${character.text}"</p>
                <p><strong>💡 إرشادات الأداء:</strong><br>${character.tips}</p>
            `;

            userData.statistics.charactersPlayed += 1;
            userData.skills.expression += 4;
            userData.statistics.totalGamePoints += 15;
            addExperiencePoints(8);
            updateAllUI();

            showNotification(`🎭 اخترت شخصية ${character.name}. +8 نقاط خبرة`, 'success');
        }

        function startPronunciationChallenge() {
            currentWordIndex = 0;
            displayCurrentWord();
            showNotification('🔤 بدأ تحدي النطق! انطق الكلمات بوضوح', 'info');
        }

        function displayCurrentWord() {
            if (currentWordIndex < pronunciationWords.length) {
                const word = pronunciationWords[currentWordIndex];
                document.getElementById('pronunciationChallenge').innerHTML = `
                    <h4>كلمة رقم ${currentWordIndex + 1}:</h4>
                    <p style="font-size: 1.5em; font-weight: bold; margin: 20px 0;">${word}</p>
                    <p>انطق هذه الكلمة بوضوح ودقة</p>
                    <button class="btn" onclick="nextWord()">✅ التالي</button>
                `;
            } else {
                completePronunciationChallenge();
            }
        }

        function nextWord() {
            if (currentWordIndex < pronunciationWords.length) {
                userData.skills.clarity += 3;
                userData.statistics.totalGamePoints += 10;
                addExperiencePoints(5);
                currentWordIndex++;
                displayCurrentWord();
                showNotification('✅ ممتاز! +5 نقاط خبرة', 'success');
                updateAllUI();
            }
        }

        function completePronunciationChallenge() {
            document.getElementById('pronunciationChallenge').innerHTML = `
                <h4>🎉 تهانينا! أكملت تحدي النطق</h4>
                <p>نطقت جميع الكلمات بنجاح!</p>
                <p><strong>+25 نقطة خبرة إضافية</strong></p>
                <button class="btn" onclick="startPronunciationChallenge()">🔄 تحدي جديد</button>
            `;

            userData.statistics.gamesPlayed += 1;
            addExperiencePoints(25);
            updateAllUI();
            showNotification('🏆 مبروك! أكملت تحدي النطق المثالي', 'success');
        }

        // وظائف تقرير التقدم
        function generateDetailedReport() {
            const report = `
تقرير التقدم الشامل - ${userData.profile.name}
========================================

📊 الإحصائيات العامة:
- المستوى الحالي: ${userData.profile.currentLevel}
- إجمالي نقاط الخبرة: ${userData.profile.xp}
- إجمالي الجلسات: ${userData.statistics.totalSessions}
- ساعات التدريب: ${Math.round(userData.statistics.totalMinutes / 60)}

🎯 المهارات الصوتية:
- التنفس والتحكم: ${userData.skills.breathing}%
- وضوح النطق: ${userData.skills.clarity}%
- التعبير والتنغيم: ${userData.skills.expression}%
- الثقة والحضور: ${userData.skills.confidence}%

🎮 إنجازات الألعاب:
- ألعاب مكتملة: ${userData.statistics.gamesPlayed}
- نقاط الألعاب: ${userData.statistics.totalGamePoints}
- شخصيات مُؤداة: ${userData.statistics.charactersPlayed}

💡 التوصيات:
${generatePersonalRecommendations()}

تاريخ التقرير: ${new Date().toLocaleDateString('ar-SA')}
            `;

            // إنشاء ملف نصي للتحميل (محاكاة)
            showNotification('📋 تم إنشاء التقرير المفصل', 'success');
            
            // عرض التقرير في النافذة
            const reportWindow = window.open('', '_blank');
            reportWindow.document.write(`
                <html dir="rtl">
                <head>
                    <title>تقرير التقدم</title>
                    <style>
                        body { font-family: Arial, sans-serif; padding: 20px; line-height: 1.6; }
                        pre { white-space: pre-wrap; }
                    </style>
                </head>
                <body>
                    <pre>${report}</pre>
                </body>
                </html>
            `);
        }

        function generatePersonalRecommendations() {
            const recommendations = [];
            
            if (userData.skills.breathing < 50) {
                recommendations.push('• ركز على تمارين التنفس الأساسية لتقوية الأساس');
            }
            if (userData.skills.clarity < 50) {
                recommendations.push('• مارس تمارين النطق الواضح يومياً');
            }
            if (userData.skills.expression < 50) {
                recommendations.push('• تدرب على تغيير النبرة والتنغيم');
            }
            if (userData.skills.confidence < 50) {
                recommendations.push('• اعمل على بناء الثقة من خلال المزيد من التدريب');
            }
            if (userData.statistics.gamesPlayed < 5) {
                recommendations.push('• جرب المزيد من الألعاب التفاعلية لتحسين مهاراتك');
            }
            
            if (recommendations.length === 0) {
                recommendations.push('• أداؤك ممتاز! استمر في التدريب المنتظم للحفاظ على مستواك');
            }
            
            return recommendations.join('\n');
        }

        function exportProgress() {
            const exportData = {
                profile: userData.profile,
                skills: userData.skills,
                statistics: userData.statistics,
                exportDate: new Date().toISOString()
            };

            const jsonData = JSON.stringify(exportData, null, 2);
            
            // محاكاة تصدير البيانات
            showNotification('💾 تم تصدير بياناتك بنجاح', 'success');
            
            // عرض البيانات في نافذة جديدة
            const exportWindow = window.open('', '_blank');
            exportWindow.document.write(`
                <html>
                <head>
                    <title>بيانات التدريب المصدرة</title>
                    <style>
                        body { font-family: monospace; padding: 20px; }
                        pre { background: #f5f5f5; padding: 15px; border-radius: 5px; }
                    </style>
                </head>
                <body>
                    <h2>بيانات التدريب المصدرة</h2>
                    <pre>${jsonData}</pre>
                </body>
                </html>
            `);
        }

        function setTrainingGoals() {
            const currentTotal = userData.skills.breathing + userData.skills.clarity + userData.skills.expression + userData.skills.confidence;
            const targetTotal = currentTotal + 100;

            document.getElementById('personalRecommendations').innerHTML = `
                <h4>🎯 أهدافك الجديدة</h4>
                <p><strong>الهدف الأساسي:</strong> الوصول إلى ${targetTotal} نقطة إجمالية</p>
                <p><strong>الهدف اليومي:</strong> إكمال تمرين واحد على الأقل</p>
                <p><strong>الهدف الأسبوعي:</strong> تحسين مهارة واحدة بـ 10 نقاط</p>
                <p><strong>الهدف الشهري:</strong> الوصول للمستوى التالي</p>
                <p><strong>💡 نصيحة:</strong> حدد 15-20 دقيقة يومياً للتدريب للحصول على أفضل النتائج</p>
            `;
            showNotification('🎯 تم تحديد أهداف تدريبية جديدة لك', 'info');
        }

        function getPersonalizedPlan() {
            const userLevel = userData.profile.level;
            const weakestSkill = Object.keys(userData.skills).reduce((a, b) => 
                userData.skills[a] < userData.skills[b] ? a : b
            );

            let plan = '';
            if (userLevel === 'beginner') {
                plan = `
                    <h4>📋 خطة المبتدئين (4 أسابيع)</h4>
                    <p><strong>🗓️ الأسبوع 1-2:</strong> تمارين التنفس الأساسية (10 دقائق يومياً)</p>
                    <p><strong>🗓️ الأسبوع 3:</strong> إضافة تمارين النطق الواضح</p>
                    <p><strong>🗓️ الأسبوع 4:</strong> تدريب على القراءة الجهرية</p>
                `;
            } else if (userLevel === 'intermediate') {
                plan = `
                    <h4>📋 خطة المتوسطين (6 أسابيع)</h4>
                    <p><strong>🗓️ الأسبوع 1-2:</strong> تطوير التنغيم والنبرة</p>
                    <p><strong>🗓️ الأسبوع 3-4:</strong> تدريب على السيناريوهات المختلفة</p>
                    <p><strong>🗓️ الأسبوع 5-6:</strong> تطوير الحضور والثقة</p>
                `;
            } else {
                plan = `
                    <h4>📋 خطة المتقدمين (8 أسابيع)</h4>
                    <p><strong>🗓️ الأسبوع 1-2:</strong> إتقان التقنيات المتقدمة</p>
                    <p><strong>🗓️ الأسبوع 3-4:</strong> تطوير الأسلوب الشخصي</p>
                    <p><strong>🗓️ الأسبوع 5-6:</strong> تدريب على المواقف الصعبة</p>
                    <p><strong>🗓️ الأسبوع 7-8:</strong> صقل المهارات الاحترافية</p>
                `;
            }

            plan += `<p><strong>🎯 التركيز الأساسي:</strong> تطوير مهارة ${getSkillName(weakestSkill)} (نقاطك الحالية: ${userData.skills[weakestSkill]})</p>`;

            document.getElementById('personalRecommendations').innerHTML = plan;
            showNotification('تم إنشاء خطة تدريبية مخصصة لمستواك!', 'info');
        }

        function getSkillName(skill) {
            const names = {
                breathing: 'التنفس والتحكم',
                clarity: 'وضوح النطق',
                expression: 'التعبير والتنغيم',
                confidence: 'الثقة والحضور'
            };
            return names[skill] || skill;
        }

        function resetAllProgress() {
            if (confirm('هل أنت متأكد من إعادة تعيين جميع بياناتك؟ لن يمكن التراجع عن هذا الإجراء.')) {
                userData = {
                    profile: {
                        name: userData.profile.name,
                        level: userData.profile.level,
                        currentLevel: 1,
                        xp: 0,
                        joinDate: userData.profile.joinDate,
                        lastActiveDate: new Date().toISOString()
                    },
                    skills: {
                        breathing: 0,
                        clarity: 0,
                        expression: 0,
                        confidence: 0
                    },
                    statistics: {
                        totalSessions: 0,
                        totalMinutes: 0,
                        exercisesCompleted: 0,
                        gamesPlayed: 0,
                        currentStreak: 0,
                        bestSpeedTime: null,
                        charactersPlayed: 0,
                        totalGamePoints: 0,
                        breathingCycles: 0,
                        breathingSessionTime: 0,
                        breathingStreakDays: 0
                    },
                    achievements: [],
                    settings: {
                        soundEnabled: true,
                        notificationsEnabled: true
                    }
                };

                updateAllUI();
                saveUserData();
                showNotification('🔄 تم إعادة تعيين جميع البيانات', 'warning');
            }
        }

        // وظائف مساعدة
        function addExperiencePoints(points) {
            userData.profile.xp += points;
            userData.statistics.totalMinutes += Math.floor(points / 2);
            checkLevelUp();
        }

        function checkLevelUp() {
            const newLevel = Math.min(Math.floor(userData.profile.xp / 1000) + 1, 5);
            if (newLevel > userData.profile.currentLevel) {
                userData.profile.currentLevel = newLevel;
                userData.statistics.totalSessions += 1;
                const levelNames = ['', 'المبتدئ', 'المتقدم', 'المحترف', 'الخبير', 'الأسطورة'];
                showNotification(`🎉 تهانينا! وصلت إلى ${levelNames[newLevel]}! المستوى ${newLevel}`, 'success');
            }
        }

        function parseTimeString(timeString) {
            const [minutes, seconds] = timeString.split(':').map(Number);
            return minutes * 60 + seconds;
        }

        function logout() {
            if (confirm('هل تريد تسجيل الخروج؟ سيتم حفظ تقدمك تلقائياً.')) {
                saveUserData();

                // إيقاف جميع التمارين النشطة
                stopAllBreathing();
                if (currentTimer) {
                    clearInterval(currentTimer);
                    currentTimer = null;
                }

                // إعادة تعيين الواجهة
                document.getElementById('mainContent').classList.add('hidden');
                document.getElementById('loginSection').classList.remove('hidden');
                document.getElementById('userName').value = '';
                document.getElementById('userLevel').selectedIndex = 0;

                showNotification('👋 تم تسجيل الخروج وحفظ تقدمك', 'info');
            }
        }

        // تشغيل التطبيق عند تحميل الصفحة
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
            document.getElementById('userName').focus();
        });

        // حفظ دوري للبيانات
        setInterval(() => {
            if (userData.profile.name) {
                saveUserData();
            }
        }, 60000); // كل دقيقة

        // رسائل التحميل في الكونسول
        console.log('🎓 أكاديمية الإعلام الاحترافية جاهزة للاستخدام!');
        console.log('📚 جميع المميزات متاحة بدون الحاجة لاتصال إنترنت');
        console.log('💾 البيانات محفوظة محلياً مع حفظ دوري كل دقيقة');
        console.log('🎯 النظام يدعم: التدريب التفاعلي، الألعاب، التقارير، والتقييمات');
    </script>
</body>
</html>